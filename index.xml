<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ç•ªèŒ„ğŸ…æ‚è´§é“º</title>
    <link>https://blog.tomatostore.top/</link>
    <description>Recent content on ç•ªèŒ„ğŸ…æ‚è´§é“º</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 30 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.tomatostore.top/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Mac ä¸Šæµè§ˆå™¨å¯è®¿é—®githubï¼Œä½†å‘½ä»¤è¡Œ SSH è¿æ¥è¶…æ—¶</title>
      <link>https://blog.tomatostore.top/posts/2025/04/github-cmd-access-fix/</link>
      <pubDate>Wed, 30 Apr 2025 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2025/04/github-cmd-access-fix/</guid>
      <description>using SSH over 443 port to access Github</description>
      <content:encoded><![CDATA[<h2 id="é—®é¢˜è¡¨ç°">é—®é¢˜è¡¨ç°</h2>
<p>å¯ä»¥é€šè¿‡æµè§ˆå™¨æ­£å¸¸è®¿é—®<code>github.com</code>ã€‚
å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>git pull</code> æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ssh: connect to host github.com port 22: Operation timed out
</span></span><span class="line"><span class="cl">fatal: Could not <span class="nb">read</span> from remote repository.
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="æ ¸å¿ƒè§£å†³æ­¥éª¤">æ ¸å¿ƒè§£å†³æ­¥éª¤</h2>
<h3 id="ç¬¬ä¸€æ­¥éªŒè¯-ssh-ç«¯å£å°é”">ç¬¬ä¸€æ­¥ï¼šéªŒè¯ SSH ç«¯å£å°é”</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nc -vz github.com <span class="m">22</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é¢„æœŸæ­£å¸¸å“åº”ï¼š<code>Connected to github.com...</code></li>
<li>å¼‚å¸¸å“åº”ï¼š<code>Operation timed out</code> è¡¨ç¤ºç«¯å£ 22 è¢«é˜»æ–­: <code>nc: connectx to github.com port 22 (tcp) failed: Operation timed out</code></li>
</ul>
<h3 id="ç¬¬äºŒæ­¥é…ç½®-ssh-over-443-ç«¯å£">ç¬¬äºŒæ­¥ï¼šé…ç½® SSH over 443 ç«¯å£</h3>
<ol>
<li>åˆ›å»º SSH é…ç½®æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vi ~/.ssh/config
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>å†™å…¥é…ç½®å†…å®¹</li>
</ol>
<pre tabindex="0"><code class="language-config" data-lang="config">Host github.com
  Hostname ssh.github.com
  Port 443
  User git
</code></pre><h3 id="ç¬¬ä¸‰æ­¥æµ‹è¯•æ–°é…ç½®">ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æ–°é…ç½®</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ssh -T git@github.com
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¦‚æœæœ‰è¯¢é—®æ˜¯å¦ä¿®æ”¹<code>known_hosts</code>, è¾“å…¥ <code>yes</code> ï¼š
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">This host key is known by the following other names/addresses:
</span></span><span class="line"><span class="cl">  ~/.ssh/known_hosts:28: github.com
</span></span><span class="line"><span class="cl">Are you sure you want to <span class="k">continue</span> connecting <span class="o">(</span>yes/no/<span class="o">[</span>fingerprint<span class="o">])</span>? yes
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>æˆåŠŸæ ‡å¿—ï¼š<code>Hi username! You've successfully authenticated...</code></li>
</ul>
<hr>
<h2 id="è¡¥å……æ–¹æ¡ˆ">è¡¥å……æ–¹æ¡ˆ</h2>
<h3 id="ä½¿ç”¨-https-åè®®ä»£æ›¿-ssh">ä½¿ç”¨ HTTPS åè®®ä»£æ›¿ SSH</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git config --global url.<span class="s2">&#34;https://github.com/&#34;</span>.insteadOf git@github.com:
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
    </item>
    
    <item>
      <title>ä¿®å¤ RevenueCat å›½å†…è®¿é—®ï¼ŒApp Store Connect å®¡æ ¸åŠ é€Ÿ</title>
      <link>https://blog.tomatostore.top/posts/2024/12/revenuecat-connection-fix-with-proxy/</link>
      <pubDate>Sun, 15 Dec 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/12/revenuecat-connection-fix-with-proxy/</guid>
      <description>Fix connection to RevenueCat from China and expedite App Store Connect review</description>
      <content:encoded><![CDATA[<p>2024å¹´12æœˆçªå‘ï¼Œå›½å†…æ— æ³•è®¿é—® RevenueCat å¯¼è‡´å¾ˆå¤š App æ— æ³•è¿›è¡Œæ­£å¸¸ IAPã€‚</p>
<blockquote>
<p>In December 2024, RevenueCat became inaccessible in China, affecting IAP functionality in many apps.</p>
</blockquote>
<p>å®˜æ–¹ç»™å‡ºäº†ç´§æ€¥ä¿®å¤æ–¹æ¡ˆï¼šhttps://www.revenuecat.com/docs/getting-started/configuring-sdk#configuration-for-users-in-mainland-china</p>
<blockquote>
<p>Official emergency fix: <a href="https://www.revenuecat.com/docs/getting-started/configuring-sdk#configuration-for-users-in-mainland-china">https://www.revenuecat.com/docs/getting-started/configuring-sdk#configuration-for-users-in-mainland-china</a></p>
</blockquote>
<p><img loading="lazy" src="/images/revenuecat-proxy.png" alt="Configuration for users in Mainland China"  /></p>
<p>ä½ è¯´å·§ä¸å·§ï¼Œå°±åœ¨ä¸€å‘¨å‰ï¼Œæˆ‘çš„ä¸€ä¸ª iOS app åˆšé€šè¿‡å®¡æ ¸å‘å¸ƒæˆåŠŸï¼Œå°±æ­£å¥½ä½¿ç”¨äº† RevenueCatã€‚ğŸ¤£
æ²¡åŠæ³•ï¼Œç°æ”¹å®ç°æ–¹æ¡ˆç§»é™¤ RC è‚¯å®šä¸æ˜¯ä¸€æ—¶åŠä¼šèƒ½æå®šçš„ï¼Œå†è¯´è¿™ä¸ªçŠ¶æ€è¿˜ä¸ç¡®å®šæ˜¯ä¸æ˜¯å¸¸æ€ã€‚æ‰€ä»¥ç´§æ€¥æŒ‰ç…§å®˜æ–¹æ–¹æ¡ˆæäº¤äº†ä¿®æ”¹ã€‚ï¼ˆè™½ç„¶å®é™…ä¸Šæˆ‘çš„ app ä¹Ÿæ²¡å•¥ç”¨æˆ·ï¼Œä¹Ÿæ²¡æœ‰æ”¶åˆ°ä»»ä½•æ¶ˆæ¯æŠ±æ€¨è¯´æ— æ³•è´­ä¹°ï¼‰ã€‚</p>
<blockquote>
<p>Coincidentally, my iOS app using RevenueCat was just approved a week ago. ğŸ¤£ Instead of removing RC, I quickly applied the official fix, though my app has few users and no complaints yet.</p>
</blockquote>
<p>ä¿®æ”¹åæµ‹è¯•æ•ˆæœæ˜¯å¯ä»¥å»åˆ°äº§å“ä¿¡æ¯äº†ï¼ˆæˆ‘æ²¡æœ‰ RC çš„ paywallï¼Œåªæ˜¯å®šä¹‰äº†äº§å“ï¼‰ï¼Œç„¶åæŒ‰ç…§ä¹‹å‰å­¦ä¹ è¿‡çš„ App Store Connect åŠ æ€¥å®¡æ ¸çš„æ­¥éª¤èµ°äº†ä¸€éï¼Œæ²¡æƒ³åˆ°çš„æ˜¯ï¼ŒåŠ æ€¥ç”³è¯·ä¹‹åï¼Œä»…ä»…3åˆ†é’Ÿå°±å®¡æ ¸é€šè¿‡äº†ğŸ«¨ã€‚è¿™é‡Œç»™æ°´æœå®¡æ ¸ç‚¹ä¸ªèµï¼Œç„¶åå†åˆ†äº«åŠ é€Ÿå®¡æ ¸æµç¨‹ã€‚</p>
<blockquote>
<p>After the fix, product info was accessible again. I requested an expedited review, and surprisingly, it was approved in just 3 minutes! ğŸ«¨ Here&rsquo;s how to request expedited review:</p>
</blockquote>
<ol>
<li>ç™»å½• <a href="https://developer.apple.com/">https://developer.apple.com/</a> åï¼Œæ‰¾åˆ°é¡µé¢ä¸‹æ–¹çš„ Contact Usã€‚</li>
</ol>
<blockquote>
<p>Go to <a href="https://developer.apple.com/">https://developer.apple.com/</a> and find &ldquo;Contact Us&rdquo; at the bottom.</p>
</blockquote>
<p><img loading="lazy" src="/images/apple-contact-us.png" alt="contact us"  /></p>
<ol start="2">
<li>é€‰æ‹© <strong>App å®¡æ ¸</strong> -&gt; <strong>App å®¡æ ¸åŠ å¿«è¯·æ±‚</strong></li>
</ol>
<blockquote>
<p>Choose <strong>App Review</strong> -&gt; <strong>Request Expedited Review</strong></p>
</blockquote>
<p><img loading="lazy" src="/images/apple-app-review.png" alt="App review"  /></p>
<ol start="3">
<li>ç‚¹å‡» <strong>è”ç³» App Review</strong>ï¼Œåœ¨ <strong>App Information</strong>ä¸­é€‰æ‹©å¯¹åº”çš„ App å³å¯ã€‚</li>
</ol>
<blockquote>
<p>Click <strong>Contact App Review</strong> and select your app.</p>
</blockquote>
<p><img loading="lazy" src="/images/apple-app-info.png" alt="app info"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>HowTo: make links between Apple notes</title>
      <link>https://blog.tomatostore.top/posts/2024/11/hyperlink-between-apple-notes/</link>
      <pubDate>Sun, 24 Nov 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/11/hyperlink-between-apple-notes/</guid>
      <description>å¦‚ä½•åœ¨è‹¹æœğŸçš„å¤‡å¿˜å½•é—´é“¾æ¥è·³è½¬</description>
      <content:encoded><![CDATA[<h2 id="how-to-add-a-link-to-other-note">How to add a link to other note</h2>
<h3 id="1-typing-">1. Typing &ldquo;&raquo;&rdquo;</h3>
<p>Type &ldquo;&raquo;&rdquo; in the body of your note, enter the title of the note that you want to link to, and select it from the list. It works both on iOS and macOS.
<img loading="lazy" src="/images/typeing-add-link-in-notes.png" alt="typing &raquo;"  /></p>
<h3 id="2-menu">2. Menu</h3>
<p>On iOS, long press to open the options menu. Swipe left the menu to find <code>Add Link</code>.

  <img loading="lazy" src="https://cdsassets.apple.com/live/7WUAS350/images/ios/ios-18-iphone-16-pro-notes-formatting-add-link-callout.png" alt="Add link on iOS"  /></p>
<p>On macOS, right click in a note and choose <code>Add link</code> in the options menu.
<img loading="lazy" src="/images/notes-option-menu-macos.png" alt="options menu on macOS"  /></p>
<h2 id="how-to-navigate-back-to-previous-note">How to navigate back to previous note</h2>
<p>Now we have a link to another note, it will jump to the linked note when clicking the link.
Then, how can we go back to the previous note?</p>
<p>On iOS, click <code>...</code> to open menu, select <code>Recent Notes</code>.
<img loading="lazy" src="/images/navigation-back-in-notes-ios.jpeg" alt="recent notes on iOS"  /></p>
<p>On macOS, open <code>View</code> menu to select <code>Previous Note</code>.
<img loading="lazy" src="/images/navigate-back-in-notes-macos.png" alt="navigate between notes on macOS"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Ask ChatGPT/Cursor: Preprocessor Macro Doesn&#39;t Work in Swift</title>
      <link>https://blog.tomatostore.top/posts/2024/10/preprocessor-macro-in-swift/</link>
      <pubDate>Tue, 08 Oct 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/10/preprocessor-macro-in-swift/</guid>
      <description>Xcode ä¸­å¦‚ä½•å®šä¹‰ Swift é€‚ç”¨çš„é¢„å¤„ç†å®</description>
      <content:encoded><![CDATA[<h2 id="the-problem">The Problem</h2>
<p>I defined the preprocessor macro <code>USING_REVENUE_CAT=1</code> in my project target&rsquo;s Build Settings under <strong>Preprocessor Macros</strong>.</p>
<p>However, when I tried to use it in my <code>Swift</code> file with the following code, I received an error indicating that the module <code>SwiftyStoreKit</code> could not be found. This was puzzling because I expected the macro to work similarly to how it does in <code>Objective-C</code>.</p>
<p><img loading="lazy" src="/images/Preprocessor-Macros.png" alt="Preprocessor-Macros in Xcode"  /></p>
<h2 id="the-solution">The Solution</h2>
<p>Asked both <code>ChatGPT</code> and <code>Cursor</code> for help, and they gave me similar answers as following:</p>
<p><code>Swift</code> does not recognize preprocessor macros defined in the Build Settings the same way <code>Objective-C</code> does. Instead, you need to define custom flags specifically for <code>Swift</code>.</p>
<h3 id="steps-to-define-a-preprocessor-macro-for-swift">Steps to Define a Preprocessor Macro for Swift</h3>
<ol>
<li>
<p><strong>Navigate to Build Settings:</strong>
Open your project in Xcode and select your target. Then, go to the <strong>Build Settings</strong> tab.</p>
</li>
<li>
<p><strong>Find Swift Compiler - Custom Flags:</strong>
Scroll down to the <strong>Swift Compiler - Custom Flags</strong> section.</p>
</li>
<li>
<p><strong>Add the Custom Flag:</strong>
In the <strong>Other Swift Flags</strong> field, add the following:</p>
<pre tabindex="0"><code>USING_REVENUE_CAT
</code></pre></li>
</ol>
<p>This tells the <code>Swift</code> compiler to define the <code>USING_REVENUE_CAT</code> flag, allowing you to use it in your <code>Swift</code> code.</p>
<h3 id="updated-swift-code">Updated Swift Code</h3>
<p>After adding the custom flag, your <code>Swift</code> code should work as intended:</p>
<p><img loading="lazy" src="/images/Swift-Compiler_Customer-Flags.png" alt="Swift-Compiler_Customer-Flags"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>è§£å†³ Xcode 15.4 åœ¨ macOS 14.5 ä¸Šå¼€å‘ Adobe Illustrator Plugin æ—¶ Python å‘½ä»¤æœªæ‰¾åˆ°é—®é¢˜</title>
      <link>https://blog.tomatostore.top/posts/2024/09/python/</link>
      <pubDate>Sun, 01 Sep 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/09/python/</guid>
      <description>Solving the Python Command Not Found Issue When Developing Adobe Illustrator Plugin with Xcode 15.4 on macOS 14.5</description>
      <content:encoded><![CDATA[<h2 id="ä¸€é—®é¢˜æè¿°">ä¸€ã€é—®é¢˜æè¿°</h2>
<p>åœ¨ä½¿ç”¨ Xcode 15.4 åœ¨ macOS 14.5 ä¸Šå°è¯•å¼€å‘ Adobe Illustrator Plugin æ—¶ï¼Œåœ¨ç¼–è¯‘ Adobe Illustrator 2023 SDK çš„ sample è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼š</p>
<pre tabindex="0"><code>/Users/aidy/Workspace/Adobe Illustrator 2023 SDK/samplecode/StrokeFilter/build/StrokeFilter.build/Default/StrokeFilter.build/Script-FDD9160721AC093D0018B958.sh: line 2: python: command not found
Command PhaseScriptExecution failed with a nonzero exit code
</code></pre><p>æŸ¥çœ‹ <code>Script-FDD9160721AC093D0018B958.sh</code> æ–‡ä»¶å†…å®¹ä¸ºï¼š</p>
<pre tabindex="0"><code>#!/bin/sh
python ../../tools/pipl/create_pipl.py -input &#39;[{&#34;name&#34;:&#34;StrokeFilter&#34;,&#34;entry_point&#34; : &#34;PluginMain&#34;}]&#39;
</code></pre><h2 id="äºŒå°è¯•è¿‡ç¨‹">äºŒã€å°è¯•è¿‡ç¨‹</h2>
<p>é¦–å…ˆæ€€ç–‘æ˜¯æ²¡æœ‰å®‰è£… <code>xcode command line tool</code>ï¼Œä½†ç¡®è®¤å·²ç»å®‰è£…è¿‡äº†ã€‚
æ¥ç€è€ƒè™‘å¯èƒ½æ˜¯æ²¡æœ‰å®‰è£… <code>Python</code>ã€‚é€šè¿‡ <code>brew install python</code> å®‰è£…äº† <code>Python3</code>ï¼Œä½† <code>Xcode</code> ä¸­ä»ç„¶æç¤º<code>python: command not found</code>ã€‚
ä» <code>Adobe Community</code> æœç´¢å¾—çŸ¥è¿™é‡Œéœ€è¦ <code>Python2</code>ï¼Œäºæ˜¯ä½¿ç”¨ <code>pyenv</code> å®‰è£…äº† <code>Python2</code>ï¼Œå¹¶è®¾ç½® <code>pyenv global 2.7.18</code>ã€‚åœ¨ <code>Terminal</code> ä¸­æ‰§è¡Œ <code>python -V</code> è¾“å‡ºæ˜¯ <code>Python 2.7.18</code>ï¼Œç„¶è€Œ <code>Xcode build</code> ä¾æ—§æŠ¥é”™ã€‚
å°è¯•äº† <code>sudo ln /Users/&lt;user&gt;/.pyenv/shims/python /Library/Developer/CommandLineTools/usr/bin/python</code>ï¼Œä½†æ²¡æœ‰ä½œç”¨ã€‚</p>
<h2 id="ä¸‰æœ€ç»ˆè§£å†³åŠæ³•">ä¸‰ã€æœ€ç»ˆè§£å†³åŠæ³•</h2>
<p>é€šè¿‡ <code>sudo ln /Users/&lt;user&gt;/.pyenv/shims/python /usr/local/bin/python</code> è®¾ç½® <code>/usr/local/bin</code> çš„ <code>link</code>ï¼Œè§£å†³äº†é—®é¢˜ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>[Linux] Share environment variables with root user</title>
      <link>https://blog.tomatostore.top/posts/2024/07/share-env-when-running-cmd-with-sudo/</link>
      <pubDate>Thu, 25 Jul 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/07/share-env-when-running-cmd-with-sudo/</guid>
      <description>Keep current user&amp;#39;s env variables when running sudo command</description>
      <content:encoded><![CDATA[<h2 id="linux-share-environment-variables-with-root-user">[Linux] Share environment variables with root user</h2>
<h4 id="problem">Problem</h4>
<p>There are some environment variabels (e.g. <code>http_proxy</code>) set for current user on Ubuntu 20.4, but when running some commands with <code>sudo</code> (like <code>sudo apt update</code>), those environment variables are not available anymore.</p>
<h4 id="solution">Solution</h4>
<ol>
<li><code>sudo -E</code></li>
</ol>
<p>If you are running commands manually, it&rsquo;s possible to preserve evn setting by adding <code>-E</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo -E apt update
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li><code>sudo visudo</code></li>
</ol>
<p>Using option <code>-E</code> may not work in the cases that the commands with <code>sudo</code> are run in script.
To make the specific environment settings shared with <code>sudo</code>, it can be configured with <code>visudo</code>.</p>
<p>Using following command:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo visudo
</span></span></code></pre></td></tr></table>
</div>
</div><p>In opened nano editor, find the line begins with <code>Defaults        env_keep</code>, modify it as following to make <code>http_proxy</code> and <code>https_proxy</code> settings be keeped when running commands using <code>sudo</code>:</p>
<pre tabindex="0"><code>Defaults        env_keep += &#34;https_proxy http_proxy&#34;
</code></pre><p>Then, when running <code>sudo apt update</code>, those proxy env variables will kept.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>How to enable AddressSanitizer(ASan) for C&#43;&#43; Project</title>
      <link>https://blog.tomatostore.top/posts/2024/05/how-to-enable-asan-in-cpp-project/</link>
      <pubDate>Fri, 24 May 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/05/how-to-enable-asan-in-cpp-project/</guid>
      <description>The tool to detect runtime memory leak</description>
      <content:encoded><![CDATA[<p>To integrate AddressSanitizer(ASan) to an existing project, just add the compile option <code>-fsanitize=address</code> and generate debug infor with <code>-g</code> in <code>CMakeLists.txt</code>.</p>
<pre tabindex="0"><code>option(ENABLE_ASAN &#34;enable AddressSanitizer&#34; OFF)

if(ENABLE_ASAN)
    set(CMAKE_CXX_FLAGS &#34;${CMAKE_CXX_FLAGS} -fsanitize=address&#34;)
    set(CMAKE_CXX_FLAGS &#34;-O -g&#34;)
    set(CMAKE_C_FLAGS &#34;-O -g&#34;)
endif()
</code></pre><p>Compile the project:</p>
<pre tabindex="0"><code>mkdir build
cd build
cmake -DENABLE_ASAN=ON ..
cmake --build .
</code></pre><p>After the build, using following command to start the program:</p>
<pre tabindex="0"><code>ASAN_OPTIONS=detect_leaks=1 ./a.out
</code></pre><p>It will print detail info when memory leak occurs.</p>
<pre tabindex="0"><code>=================================================================
==12345==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 40 byte(s) in 1 object(s) allocated from:
    #0 0x7f3d8b4fbb90 in __interceptor_new (/usr/lib/x86_64-linux-gnu/libasan.so.4+0xde90)
    #1 0x4006d6 in createLeak /path/to/your/project/main.cpp:4
    #2 0x4006f8 in main /path/to/your/project/main.cpp:9
    #3 0x7f3d8b0d283f in __libc_start_main (/lib64/libc.so.6+0x2383f)

SUMMARY: AddressSanitizer: 40 byte(s) leaked in 1 allocation(s).
</code></pre>]]></content:encoded>
    </item>
    
    <item>
      <title>Install docker in Ubuntu 20 and config network proxy</title>
      <link>https://blog.tomatostore.top/posts/2024/05/install-docker-on-ubuntu-20/</link>
      <pubDate>Tue, 21 May 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/05/install-docker-on-ubuntu-20/</guid>
      <description>åœ¨Ubuntu 20ä¸­å®‰è£… Dockerã€é…ç½®ç½‘ç»œä»£ç†</description>
      <content:encoded><![CDATA[<h2 id="steps-to-install-docker-on-ubuntu-20">steps to install docker on Ubuntu 20</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install apt-transport-https ca-certificates curl software-properties-common
</span></span><span class="line"><span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo apt-key add -
</span></span><span class="line"><span class="cl">sudo add-apt-repository <span class="s2">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> stable&#34;</span>
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get install docker-ce
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="verify-the-installation">verify the installation</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl status docker
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="add-current-user-to-docker-group">add current user to docker group</h2>
<ul>
<li>in order to avoid adding <code>sudo</code> when running docker command</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo usermod -aG docker <span class="si">${</span><span class="nv">USER</span><span class="si">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="network-proxy-settings">Network proxy settings</h2>
<h3 id="dockerd-proxy">Dockerd Proxy</h3>
<p>To configure the proxy for <code>dockerd</code>, which is managed by <code>systemd</code>, create and edit a configuration file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo mkdir -p /etc/systemd/system/docker.service.d
</span></span><span class="line"><span class="cl">sudo touch /etc/systemd/system/docker.service.d/proxy.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>Add the following to <code>proxy.conf</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[Service]</span>
</span></span><span class="line"><span class="cl"><span class="na">Environment</span><span class="o">=</span><span class="s">&#34;HTTP_PROXY=http://proxy.example.com:8080/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">Environment</span><span class="o">=</span><span class="s">&#34;HTTPS_PROXY=http://proxy.example.com:8080/&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">Environment</span><span class="o">=</span><span class="s">&#34;NO_PROXY=localhost,127.0.0.1,.example.com&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Replace <code>proxy.example.com:8080</code> with your proxy address.</p>
<h3 id="container-proxy">Container Proxy</h3>
<p>To configure proxy settings for containers, edit <code>~/.docker/config.json</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&#34;proxies&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;default&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;httpProxy&#34;</span><span class="p">:</span> <span class="s2">&#34;http://proxy.example.com:8080&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;httpsProxy&#34;</span><span class="p">:</span> <span class="s2">&#34;http://proxy.example.com:8080&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;noProxy&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost,127.0.0.1,.example.com&#34;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>For container runtime proxies, use the <code>-e</code> option to set environment variables.</p>
<h3 id="docker-build-proxy">Docker Build Proxy</h3>
<p>For <code>docker build</code>, inject proxy settings using <code>--build-arg</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">docker build . <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --build-arg <span class="s2">&#34;HTTP_PROXY=http://proxy.example.com:8080/&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --build-arg <span class="s2">&#34;HTTPS_PROXY=http://proxy.example.com:8080/&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --build-arg <span class="s2">&#34;NO_PROXY=localhost,127.0.0.1,.example.com&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -t your/image:tag
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="applying-changes">Applying Changes</h3>
<p>To apply the changes:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo systemctl daemon-reload
</span></span><span class="line"><span class="cl">sudo systemctl restart docker
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="trouble-shooting">Trouble shooting</h2>
<h3 id="when-running-command-sudo-apt-update-it-has-following-error">when running command <code>sudo apt update</code>, it has following error</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Err:5 https://download.docker.com/linux/ubuntu focal Release                                            
</span></span><span class="line"><span class="cl">  Could not handshake: The TLS connection was non-properly terminated. <span class="o">[</span>IP: &lt;xx.xxx.xx.xxx&gt; 3128<span class="o">]</span>
</span></span><span class="line"><span class="cl">Hit:6 http://security.ubuntu.com/ubuntu focal-security InRelease                                        
</span></span><span class="line"><span class="cl">Hit:7 http://us.archive.ubuntu.com/ubuntu focal-security InRelease
</span></span><span class="line"><span class="cl">Reading package lists... Done
</span></span><span class="line"><span class="cl">E: The repository <span class="s1">&#39;https://download.docker.com/linux/ubuntu focal Release&#39;</span> does not have a Release file.
</span></span><span class="line"><span class="cl">N: Updating from such a repository can<span class="err">&#39;</span>t be <span class="k">done</span> securely, and is therefore disabled by default.
</span></span><span class="line"><span class="cl">N: See apt-secure<span class="o">(</span>8<span class="o">)</span> manpage <span class="k">for</span> repository creation and user configuration details.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="solution">Solution</h4>
<p>According to <a href="https://askubuntu.com/a/1289675/1578724">this answer</a>, modify <code>/etc/apt/apt.config</code> to make sure the proxy settings are correct, especially the <code>https</code> settings.</p>
<ul>
<li><strong>Wrong config:</strong></li>
</ul>
<pre tabindex="0"><code>Acquire::http::proxy &#34;http://proxy.mydom.it:8080&#34;;
Acquire::https::proxy &#34;https://proxy.mydom.it:8080&#34;;
</code></pre><ul>
<li><strong>Good config:</strong></li>
</ul>
<pre tabindex="0"><code>Acquire::http::proxy &#34;http://proxy.mydom.it:8080&#34;;
Acquire::https::proxy &#34;http://proxy.mydom.it:8080&#34;;
</code></pre>]]></content:encoded>
    </item>
    
    <item>
      <title>VSCode: æ­£åˆ™æœç´¢åŒ¹é…å¤šè¡Œå¤šä¸ªå…³é”®å­—</title>
      <link>https://blog.tomatostore.top/posts/2024/05/vscode-regexp-match-multiple-words-in-diff-lines/</link>
      <pubDate>Tue, 07 May 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/05/vscode-regexp-match-multiple-words-in-diff-lines/</guid>
      <description>Match two words in diff lines in VSCode</description>
      <content:encoded><![CDATA[<p>åœºæ™¯ï¼š<code>QML</code> é¡¹ç›®ä¸­æœç´¢ <code>Button</code> æ§ä»¶å¹¶ä½¿ç”¨äº† <code>background</code> å±æ€§çš„ä»£ç ã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼å†™æ³•ï¼š <code>Button.*(?:\n.*(?:\n.*)){0,10}.*background</code></p>
<p>åŒ¹é…æ•ˆæœï¼š</p>
<p><img loading="lazy" src="/images/vscode-regexp-match-multiple-words-in-diff-lines.png" alt="vscode-regexp-match-multiple-words-in-diff-lines"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>DPæ¥å£æ— æ³•è¿æ¥æ˜¾ç¤ºå™¨çš„è§£å†³åŠæ³•</title>
      <link>https://blog.tomatostore.top/posts/2024/03/cannot-connect-display-via-dp-channel/</link>
      <pubDate>Fri, 08 Mar 2024 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2024/03/cannot-connect-display-via-dp-channel/</guid>
      <description>Cannot connect to display via DP channel</description>
      <content:encoded><![CDATA[<p>AOCçš„æ˜¾ç¤ºå™¨ä¹‹å‰ä¸€ç›´å¯ä»¥ç”¨miniDPè½¬DPçš„çº¿è¿æ¥MacBookProï¼Œçªç„¶æœ‰ä¸€å¤©å°±è¿ä¸ä¸Šäº†ã€‚
å°è¯•äº†é‡ç°æ’æ‹”ã€é‡å¯ç”µè„‘ã€å…³é—­/æ‰“å¼€æ˜¾ç¤ºå™¨ï¼Œéƒ½ä¸è¡Œã€‚æ‰€ä»¥æ€€ç–‘æ˜¯çº¿çš„é—®é¢˜ï¼Œä¹°äº†ä¸€æ ¹æ–°çš„çº¿ï¼Œç»“æœè¿˜æ˜¯ä¸è¡Œã€‚å°è¯•äº†HDMIçº¿è¿æ¥æ˜¯æ²¡é—®é¢˜çš„ã€‚</p>
<p>åœ¨å‡†å¤‡è”ç³»æ˜¾ç¤ºå™¨ç»´ä¿®ä¹‹å‰å‘ç°äº†è¿™ä¸ªç½‘é¡µ <a href="https://zhuanlan.zhihu.com/p/466826180">https://zhuanlan.zhihu.com/p/466826180</a>ï¼Œæ²¡æƒ³åˆ°çš„æ˜¯åœ¨<strong>æ‹”æ‰æ˜¾ç¤ºå™¨ç”µæºçº¿å†æ’å›å»</strong>ä¹‹åï¼Œç«Ÿç„¶å°±å¥½äº†ã€‚ã€‚ã€‚</p>
<p>My AOC monitor, which used to connect to my MacBook Pro with a miniDP-to-DP cable, suddenly stopped working one day.</p>
<p>I tried re-plugging the cable, restarting my computer, and turning the monitor off and on, but nothing worked. So I suspected it might be the cable&rsquo;s fault and bought a new one, but it still didn&rsquo;t work. I tried connecting with an HDMI cable and it worked fine.</p>
<p>Before I was about to contact the monitor repair service, I found this webpage: <a href="https://zhuanlan.zhihu.com/p/466826180">https://zhuanlan.zhihu.com/p/466826180</a>. Surprisingly, after <strong>unplugging the monitor&rsquo;s power cord and plugging it back in</strong>, it worked again&hellip;</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>iOSå¼€å‘-åŠ è½½å…¶ä»–è¯­è¨€çš„Stringèµ„æº</title>
      <link>https://blog.tomatostore.top/posts/2023/11/ios-localized-string-in-diff-languages/</link>
      <pubDate>Sat, 11 Nov 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/11/ios-localized-string-in-diff-languages/</guid>
      <description>Load Settings.bundle in diff languages</description>
      <content:encoded><![CDATA[<p>åœ¨å¼€å‘iOSåº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°éœ€è¦ä½¿ç”¨ä¸åŒè¯­è¨€çš„å­—ç¬¦ä¸²èµ„æºçš„æƒ…å†µã€‚æ¯”å¦‚ï¼Œå½“iOSçš„è¯­è¨€è®¾ç½®ä¸ºAï¼Œè€Œæˆ‘ä»¬çš„åº”ç”¨éœ€è¦ä½¿ç”¨è¯­è¨€Bã€‚
è¿™é‡Œæœ‰ä¸€ä¸ªè¯­éŸ³è®¡ç®—å™¨ï¼Œç”¨æˆ·å¯ä»¥åœ¨è®¡ç®—æ—¶é€‰æ‹©ä¸åŒçš„è¯­éŸ³æœ—è¯»è¯­è¨€ï¼Œè€Œæ— éœ€æ”¹å˜æ•´ä¸ªiOSçš„è¯­è¨€è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„æ‰‹æœºè¯­è¨€è®¾ç½®ä¸ºè‹±è¯­ï¼Œä½†æˆ‘ä»¬å¸Œæœ›è®¡ç®—å™¨èƒ½ç”¨ä¸­æ–‡æœ—è¯»è®¡ç®—ç»“æœã€‚</p>
<a href="https://apps.apple.com/cn/app/id1501166219">
  <img src="/images/calculator-settings.jpg" align="center" style="width: 80%; height: 80%;"/>
</a>
<p>ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨iOSçš„æœ¬åœ°åŒ–æœºåˆ¶ã€‚æœ‰ä¸¤ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>åŠ è½½ç›¸åº”è¯­è¨€çš„èµ„æºæ–‡ä»¶</strong></li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ç§è¯­è¨€åˆ›å»ºä¸€ä¸ªèµ„æºæ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ æˆ‘ä»¬çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ï¼Œä»ç›¸åº”çš„èµ„æºæ–‡ä»¶ä¸­åŠ è½½å­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®ç°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">extension</span> <span class="nc">String</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nv">localized</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// TalkingNumCalUserDefaults.voiceLang has value like &#39;en-US&#39;, &#39;fr-FR&#39;, &#39;de-DE&#39; etc.</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="kd">let</span> <span class="nv">lang</span> <span class="p">=</span> <span class="n">Locale</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="n">TalkingNumCalUserDefaults</span><span class="p">.</span><span class="n">voiceLang</span><span class="p">).</span><span class="n">languageCode</span> <span class="p">{</span> <span class="c1">// e.g. en, jp, zh ...</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="kd">let</span> <span class="nv">path</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">path</span><span class="p">(</span><span class="n">forResource</span><span class="p">:</span> <span class="n">lang</span><span class="p">,</span> <span class="n">ofType</span><span class="p">:</span> <span class="s">&#34;lproj&#34;</span><span class="p">),</span> <span class="kd">let</span> <span class="nv">bundle</span> <span class="p">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kd">let</span> <span class="nv">string</span> <span class="p">=</span> <span class="n">bundle</span><span class="p">.</span><span class="n">localizedString</span><span class="p">(</span><span class="n">forKey</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">string</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆéœ€è¦æˆ‘ä»¬é¢„å…ˆå‡†å¤‡å¥½æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„è¯­è¨€çš„èµ„æºæ–‡ä»¶ã€‚å½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ç§è¯­è¨€åï¼Œæˆ‘ä»¬ä»å¯¹åº”çš„èµ„æºæ–‡ä»¶ä¸­åŠ è½½å­—ç¬¦ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„èµ„æºæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±è¿”å›ä¸€ä¸ªæœªæœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ã€‚</p>
<ol start="2">
<li><strong>è®¾ç½®Bundleçš„è¯­è¨€</strong></li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€è®¾ç½®Bundleçš„è¯­è¨€ï¼Œç„¶åç›´æ¥ä»Bundleä¸­è·å–æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨Swiftä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®ç°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">extension</span> <span class="nc">String</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nv">localized</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// TalkingNumCalUserDefaults.voiceLang has value like &#39;en-US&#39;, &#39;fr-FR&#39;, &#39;de-DE&#39; etc.</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="kd">let</span> <span class="nv">lang</span> <span class="p">=</span> <span class="n">Locale</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="n">TalkingNumCalUserDefaults</span><span class="p">.</span><span class="n">voiceLang</span><span class="p">).</span><span class="n">languageCode</span> <span class="p">{</span> <span class="c1">// e.g. en, jp, zh ...</span>
</span></span><span class="line"><span class="cl">            <span class="n">Bundle</span><span class="p">.</span><span class="n">setLanguage</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">tableName</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆéœ€è¦æˆ‘ä»¬åœ¨æ¯æ¬¡ç”¨æˆ·é€‰æ‹©ä¸€ç§æ–°çš„è¯­è¨€æ—¶ï¼Œéƒ½é‡æ–°è®¾ç½®ä¸€æ¬¡Bundleçš„è¯­è¨€ã€‚ç„¶åï¼Œæˆ‘ä»¬ä»Bundleä¸­è·å–æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å°±è¿”å›ä¸€ä¸ªæœªæœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Variadic Template and Fold Expression in C&#43;&#43;</title>
      <link>https://blog.tomatostore.top/posts/2023/08/cpp-variadic-template-and-fold-expression/</link>
      <pubDate>Mon, 21 Aug 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/08/cpp-variadic-template-and-fold-expression/</guid>
      <description>C&#43;&#43; å¯å˜æ¨¡æ¿å’ŒæŠ˜å è¡¨è¾¾å¼</description>
      <content:encoded><![CDATA[<p>é‡åˆ°å¦‚ä¸‹ä»£ç ï¼Œå¯¹äº <code>func2</code> æ²¡æœ‰çœ‹æ‡‚ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">DataStruct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">DataStruct</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span> <span class="n">index</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">value</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">index</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">T</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">func1</span><span class="p">(</span><span class="n">string</span> <span class="n">prefix</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">T</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">__FUNCTION__</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;(&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">prefix</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;, &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;, &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;)&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">T</span><span class="o">&gt;</span> <span class="c1">// mark 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">auto</span> <span class="n">func2</span><span class="p">(</span><span class="n">string</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">DataStruct</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;&amp;</span><span class="p">...</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// mark 2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">(</span><span class="n">func1</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">value</span><span class="p">),</span> <span class="p">...);</span>  <span class="c1">// mark 3
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">func2</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&#34;hi &#34;</span><span class="p">,</span> <span class="n">DataStruct</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s">&#34;Tom&#34;</span><span class="p">),</span> <span class="n">DataStruct</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s">&#34;Mason&#34;</span><span class="p">),</span> <span class="n">DataStruct</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">999</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;done</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// execute result
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">func1(hi , 12, Tom)
</span></span></span><span class="line"><span class="cl"><span class="cm">func1(hi , 29, Mason)
</span></span></span><span class="line"><span class="cl"><span class="cm">func1(hi , 100, 999)
</span></span></span><span class="line"><span class="cl"><span class="cm">done
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŸ¥è¯¢åå¾—çŸ¥æ˜¯ <code>C++</code> çš„å¯å˜æ¨¡æ¿(<code>variadic template</code>)å’ŒæŠ˜å è¡¨è¾¾å¼(<code>fold expression</code>)ã€‚</p>
<h2 id="å¯å˜æ¨¡æ¿variadic-template">å¯å˜æ¨¡æ¿ï¼ˆVariadic Templateï¼‰</h2>
<p>å¯å˜æ¨¡æ¿æ˜¯ C++11 å¼•å…¥çš„åŠŸèƒ½ï¼Œå…è®¸æ¨¡æ¿æ¥å—<em>ä¸å®šæ•°é‡çš„æ¨¡æ¿å‚æ•°</em>ã€‚è¿™å¯¹äºéœ€è¦å¤„ç†å¤šä¸ªå‚æ•°ç±»å‹æˆ–æ•°é‡çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">coutX</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// ç»ˆæ­¢æ¡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Types</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">coutX</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">t</span><span class="p">,</span> <span class="k">const</span> <span class="n">Types</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">t</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// cout 1st argument
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">coutX</span><span class="p">(</span><span class="n">args</span><span class="p">...);</span> <span class="c1">// å¯¹å¯å˜å‚æ•°é€’å½’è°ƒç”¨ coutX
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­éæ¨¡æ¿é‡è½½å‡½æ•° <code>contX()</code> æ˜¯é€’å½’è°ƒç”¨çš„ç»ˆæ­¢æ¡ä»¶ã€‚</p>
<h2 id="æŠ˜å è¡¨è¾¾å¼fold-expression">æŠ˜å è¡¨è¾¾å¼ï¼ˆFold Expressionï¼‰</h2>
<p>æŠ˜å è¡¨è¾¾å¼æ˜¯ <code>C++17</code> ä¸ºé…åˆ <code>Variadic Template</code> ä½¿ç”¨å¼•å…¥çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸åœ¨æ¨¡æ¿å±•å¼€è¿‡ç¨‹ä¸­è¿›è¡Œä¸€å…ƒæˆ–äºŒå…ƒæ“ä½œã€‚æŠ˜å è¡¨è¾¾å¼æœ‰ä¸¤ç§å½¢å¼ï¼šå·¦æŠ˜å å’Œå³æŠ˜å ã€‚</p>
<p>å¯¹åº”çš„å±•å¼€å…³ç³»å¦‚ä¸‹ï¼š</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Fold Expression</th>
          <th style="text-align: right">Evaluation</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>(E op ...)</code></td>
          <td style="text-align: right"><code>(E1 op (... op (EN-1 op EN)))</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>(... op E)</code></td>
          <td style="text-align: right"><code>(((E1 op E2) op ...) op EN)</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>(E op ... op I)</code></td>
          <td style="text-align: right"><code>(E1 op (... op (ENâˆ’1 op (EN op I))))</code></td>
      </tr>
      <tr>
          <td style="text-align: left"><code>(I op ... op E)</code></td>
          <td style="text-align: right"><code>((((I op E1) op E2) op ...) op EN)</code></td>
      </tr>
  </tbody>
</table>
<p>å…¶ä¸­</p>
<ul>
<li>å·¦æŠ˜å å½¢å¼ï¼š<code>(expr op ...)</code>ï¼Œå…¶ä¸­ <code>expr</code> æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ<code>op</code> æ˜¯äºŒå…ƒæ“ä½œç¬¦ã€‚</li>
<li>å³æŠ˜å å½¢å¼ï¼š<code>(... op expr)</code>ï¼ŒåŒæ ·ï¼Œ<code>expr</code> æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ<code>op</code> æ˜¯äºŒå…ƒæ“ä½œç¬¦ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">T</span><span class="o">&gt;</span> <span class="c1">// variadic template
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">auto</span> <span class="n">func2</span><span class="p">(</span><span class="n">string</span> <span class="n">p</span><span class="p">,</span> <span class="k">const</span> <span class="n">DataStruct</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;&amp;</span><span class="p">...</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// variadic template
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">(</span><span class="n">func1</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">value</span><span class="p">),</span> <span class="p">...);</span> <span class="c1">// fold expression
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>func2</code> å‡½æ•°çš„å®ç°ä½¿ç”¨äº†å³æŠ˜å è¡¨è¾¾å¼<code>(expr op ...)</code>ã€‚å…¶å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>expr</code> : <code>func1(p, s.index, s.value)</code></li>
<li><code>op</code> : <code>, </code></li>
<li><code>...</code> : <code>...</code></li>
</ul>
<p>å¦ä¸€ä¸ª <code>(I op ... op E)</code> æŠ˜å è¡¨è¾¾å¼çš„ä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="p">...</span> <span class="n">Values</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">auto</span> <span class="n">sum</span><span class="p">(</span><span class="n">Values</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">values</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="mi">0</span> <span class="o">+</span> <span class="p">...</span> <span class="o">+</span> <span class="n">values</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// same as (0 + 1 + 2 + 3 + 4)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­</p>
<ul>
<li><code>I</code> : <code>0</code></li>
<li><code>op</code> : <code>+</code></li>
<li><code>...</code> : <code>...</code></li>
<li><code>op</code> : <code>+</code></li>
<li><code>E</code> : <code>values</code></li>
</ul>
<p>å¯¹äºå‰é¢ <code>contX</code> çš„ä¾‹å­ï¼Œåœ¨ä½¿ç”¨ <code>C++17</code> çš„ <code>Fold Expression</code> åå°±ä¸éœ€è¦å†æ‰‹åŠ¨å®ç°é€’å½’å’Œç»ˆæ­¢æ¡ä»¶ï¼Œå¯ç®€åŒ–å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">coutX</span><span class="p">(</span><span class="k">const</span> <span class="n">Types</span><span class="o">&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">...</span> <span class="o">&lt;&lt;</span> <span class="n">args</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
    </item>
    
    <item>
      <title>How to run fsck to check and fix filesystem of Ubuntu 20</title>
      <link>https://blog.tomatostore.top/posts/2023/08/how-to-run-fsck-in-ubuntu20-to-fix-filesystem/</link>
      <pubDate>Wed, 02 Aug 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/08/how-to-run-fsck-in-ubuntu20-to-fix-filesystem/</guid>
      <description>/dev/sda1: UNEXPECTED INCONSISTENCY: RUN fsck MANUALLY. fsck exited with status code 4</description>
      <content:encoded><![CDATA[<p>å½“åœ¨ <code>VMware</code> è™šæ‹Ÿæœºä¸­è¿è¡Œ <code>Ubuntu 20</code> æ—¶ï¼Œæœ‰æ—¶å¯èƒ½ä¼šé‡åˆ°å¯åŠ¨æ—¶å‡ºç° &ldquo;éœ€è¦ fsck&rdquo; çš„é—®é¢˜ã€‚</p>
<pre tabindex="0"><code>/dev/sda1 contains a file system with errors, check forced.
Inodes that were part of a corrupted orphan linked list found.

/dev/sda1: UNEXPECTED INCONSISTENCY: RUN fsck MANUALLY.
         (i.e., without -a or -p options)
fsck exited with status code 4
The root filesystem on /dev/sda1 requires a manual fsck

BusyBox v1.22.1 (Ubuntu 1:1.22.0-19ubuntuu2) built-in shell (ash)
Enter &#39;help&#39; for a list of built-in commands.

(initramfs)_
</code></pre><p>è¿™æ˜¯ç”±äºæ–‡ä»¶ç³»ç»Ÿ <code>/dev/sda1</code> å‡ºç°äº†ä¸¥é‡é”™è¯¯æˆ–ä¸ä¸€è‡´æ€§ï¼Œéœ€è¦è¿è¡Œ <code>fsck</code>ï¼ˆæ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥ï¼‰æ¥è§£å†³ã€‚</p>
<p>ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ³•çš„æ­¥éª¤ï¼š</p>
<h2 id="1è¿›å…¥grub">1ï¼šè¿›å…¥GRUB</h2>
<p>å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¹¶åœ¨ <code>GRUB</code> å¯åŠ¨åŠ è½½å™¨èœå•ä¸­é€‰æ‹© <code>Advanced options for Ubuntu</code>ã€‚
<img loading="lazy" src="/images/grub-ubuntu.png" alt="GRUB"  /></p>
<h2 id="2è¿›å…¥æ¢å¤æ¨¡å¼">2ï¼šè¿›å…¥æ¢å¤æ¨¡å¼</h2>
<p>ç„¶åï¼Œé€‰æ‹©å½“å‰å†…æ ¸ç‰ˆæœ¬çš„æ¢å¤æ¨¡å¼ <code>Ubuntu, with Linux x.x.x-generic (recovery mode)</code>ã€‚
è™šæ‹Ÿæœºå°†è¿›å…¥æ¢å¤æ¨¡å¼ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªå¸¦æœ‰å¤šä¸ªé€‰é¡¹çš„èœå•ã€‚</p>
<h2 id="3é€‰æ‹©-root-shell-å¦‚æœæœ‰">3ï¼šé€‰æ‹© <code>Root Shell</code> (å¦‚æœæœ‰)</h2>
<p>é€‰æ‹©æ¢å¤æ¨¡å¼èœå•ä¸­çš„ <code>Drop to root shell prompt</code>ã€‚è‹¥æ— æ­¤é€‰é¡¹å¯è·³è¿‡æ­¤æ­¥ã€‚</p>
<h2 id="4å°†æ ¹æ–‡ä»¶ç³»ç»Ÿé‡æ–°æŒ‚è½½ä¸ºè¯»å†™">4ï¼šå°†æ ¹æ–‡ä»¶ç³»ç»Ÿé‡æ–°æŒ‚è½½ä¸ºè¯»å†™</h2>
<p>æ¢å¤æ¨¡å¼ä¸‹ï¼Œæ ¹æ–‡ä»¶ç³»ç»Ÿé€šå¸¸ä»¥åªè¯»æ¨¡å¼æŒ‚è½½ã€‚ä¸ºäº†èƒ½å¤Ÿè¿è¡Œ fsck å¹¶ä¿®å¤æ–‡ä»¶ç³»ç»Ÿï¼Œæ‚¨éœ€è¦å°†æ ¹æ–‡ä»¶ç³»ç»Ÿé‡æ–°æŒ‚è½½ä¸ºè¯»å†™æ¨¡å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mount -o remount,rw /
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="5æ‰‹åŠ¨è¿è¡Œ-fsck">5ï¼šæ‰‹åŠ¨è¿è¡Œ <code>fsck</code></h2>
<p>åœ¨æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šè¿è¡Œ fsck æ¥æ£€æŸ¥å’Œä¿®å¤é”™è¯¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">fsck -f /dev/sda1
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>-f</code> é€‰é¡¹å‘Šè¯‰ <code>fsck</code> è¦å¼ºåˆ¶è¿›è¡Œæ£€æŸ¥ã€‚</li>
</ul>
<p>è¿è¡Œåä¼šæœ‰å¤šä¸ªæç¤ºéœ€è¦æ‰‹åŠ¨è¾“å…¥ï¼Œä¸€èˆ¬å…¨éƒ¨é»˜è®¤å›è½¦å³å¯ã€‚</p>
<h2 id="6é‡æ–°å¯åŠ¨">6ï¼šé‡æ–°å¯åŠ¨</h2>
<p>åœ¨ <code>fsck</code> å®Œæˆæ£€æŸ¥å’Œä¿®å¤åï¼Œè¾“å…¥ <code>reboot</code> æˆ–é€šè¿‡ VMWare èœå•é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ChatGPT AI ååŠ© iOS å¼€å‘: customized sheet</title>
      <link>https://blog.tomatostore.top/posts/2023/07/swift-shared-customize-sheet/</link>
      <pubDate>Wed, 12 Jul 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/07/swift-shared-customize-sheet/</guid>
      <description>ç¨‹åºå‘˜èµ°åœ¨è¢« OpenAI å–ä»£çš„è·¯ä¸Š</description>
      <content:encoded><![CDATA[<h2 id="éœ€æ±‚">éœ€æ±‚</h2>
<p>App ä¸­æƒ³åŠ å…¥ä¸€ä¸ªè®¢é˜…é¡µé¢ï¼ŒæœŸæœ› iOS ä¸ŠæŒ‰ bottom sheet å±•ç¤ºï¼ŒiPad ä¸Šå±…ä¸­æ˜¾ç¤ºï¼ŒåŒæ—¶æ”¯æŒæ¨ªå±å’Œç«–å±ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="/images/iphone-subscription.png" alt="subscription in iPhone"  />
<img loading="lazy" src="/images/ipad-subsciption.png" alt="subscription in iPad"  /></p>
<p>iOS 15 æä¾›äº† <code>UISheetPresentationController</code> å¯ä»¥ä»¤ Bottom Sheet æ›´æ–¹ä¾¿ï¼Œå…·ä½“å¯å‚è€ƒ<a href="https://sarunw.com/posts/bottom-sheet-in-ios-15-with-uisheetpresentationcontroller/">How to present a Bottom Sheet in iOS 15</a>è¿˜æœ‰<a href="https://www.avanderlee.com/swift/presenting-sheets-uikit-uisheetpresentationcontroller/">Presenting sheets with UIKit using a UISheetPresentationController</a>ã€‚</p>
<p><code>UISheetPresentationController</code> ä¸æ»¡è¶³éœ€æ±‚å› ä¸ºå®ƒåªæœ‰ <code>medium</code> å’Œ <code>large</code> ä¸¤ç§é«˜åº¦ï¼Œå¹¶ä¸”å®½åº¦æ˜¯æ»¡å±ï¼Œä¸ç¬¦åˆéœ€æ±‚ã€‚
é€šè¿‡ <code>OpenAI</code> é—®ç­”ï¼Œæ‰¾åˆ°äº†å¯ä»¥æ»¡è¶³éœ€æ±‚çš„æ–¹æ³•æ¥åœ¨ä¸€ä¸ªé¡µé¢ä¸­å¼¹å‡ºè®¢é˜…é¡µé¢ã€‚</p>
<p>ç„¶åä¸å‡ºæ„å¤–çš„ï¼Œæ–°é—®é¢˜åˆå‡ºç°äº†ï¼šæƒ³è¦åœ¨å¦å¤–ä¸€ä¸ªé¡µé¢ä¸­ä¹Ÿå¼¹å‡ºåŒæ ·çš„è®¢é˜…é¡µé¢ï¼Œå½“æ—¶è¿™ä¸¤ä¸ªé¡µé¢çš„çˆ¶ç±»æ˜¯ä¸åŒ <code>UIViewController</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡åŠæ³•ç»™ä»–ä»¬å®šä¹‰ä¸€ä¸ªå…±åŒçš„å®šåˆ¶åŒ–çš„ <code>UIViewController</code>  å­ç±»ï¼Œè€Œ <code>Swift</code> åˆä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œå°è¯•äº†å¸¦é»˜è®¤å®ç°çš„ <code>Protocol</code>ï¼Œæ— æ³•å®ç°ã€‚æœ€ç»ˆè¿˜æ˜¯é€šè¿‡è¯¢é—® <code>AI</code> æ‰¾åˆ°äº†å®ç°æ–¹æ³•ï¼š</p>
<p><img loading="lazy" src="/images/chatgpt-swift-question.png" alt="dns analysis"  /></p>
<h2 id="æœ€ç»ˆå®ç°">æœ€ç»ˆå®ç°ï¼š</h2>
<ul>
<li><code>SubscriptionSheetPresenter.swift</code></li>
</ul>
<p>å…±äº«çš„ presenter</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">SubscriptionSheetPresenter</span><span class="p">:</span> <span class="n">NSObject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">instance</span> <span class="p">=</span> <span class="n">SubscriptionSheetPresenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">func</span> <span class="nf">presentBottomSheetForSubscription</span><span class="p">(</span><span class="n">from</span> <span class="n">vc</span><span class="p">:</span> <span class="n">UIViewController</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// storyboard ä¸­å®šä¹‰äº†å®šåˆ¶é¡µé¢çš„å¸ƒå±€</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nv">dashboard</span> <span class="p">=</span> <span class="n">UIStoryboard</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">&#34;Main&#34;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">guard</span> <span class="kd">let</span> <span class="nv">subscriptionVC</span> <span class="p">=</span> <span class="n">dashboard</span><span class="p">.</span><span class="n">instantiateViewController</span><span class="p">(</span><span class="n">withIdentifier</span><span class="p">:</span> <span class="s">&#34;subscriptionViewController&#34;</span><span class="p">)</span> <span class="k">as</span><span class="p">?</span> <span class="n">SubscriptionViewController</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">subscriptionVC</span><span class="p">.</span><span class="n">modalPresentationStyle</span> <span class="p">=</span> <span class="p">.</span><span class="n">custom</span>
</span></span><span class="line"><span class="cl">        <span class="n">subscriptionVC</span><span class="p">.</span><span class="n">transitioningDelegate</span> <span class="p">=</span> <span class="kc">self</span>
</span></span><span class="line"><span class="cl">        <span class="n">vc</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="n">subscriptionVC</span><span class="p">,</span> <span class="n">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">completion</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// </span><span class="cs">MARK:</span><span class="c1"> - Bottom Sheet for Subscription</span>
</span></span><span class="line"><span class="cl"><span class="kd">extension</span> <span class="nc">SubscriptionSheetPresenter</span><span class="p">:</span> <span class="n">UIViewControllerTransitioningDelegate</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">func</span> <span class="nf">presentationController</span><span class="p">(</span><span class="n">forPresented</span> <span class="n">presented</span><span class="p">:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">presenting</span><span class="p">:</span> <span class="n">UIViewController</span><span class="p">?,</span> <span class="n">source</span><span class="p">:</span> <span class="n">UIViewController</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">UIPresentationController</span><span class="p">?</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">SubscriptionSheetPresentationController</span><span class="p">(</span><span class="n">presentedViewController</span><span class="p">:</span> <span class="n">presented</span><span class="p">,</span> <span class="n">presenting</span><span class="p">:</span> <span class="n">presenting</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>SubscriptionViewController.swift</code></li>
</ul>
<p>Storyboard ä¸­è®¢é˜…é¡µé¢çš„ UIViewController class:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">SubscriptionViewController</span><span class="p">:</span> <span class="n">UIViewController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">monthlyBuy</span><span class="p">:</span> <span class="n">UIButton</span><span class="p">!</span>
</span></span><span class="line"><span class="cl">    <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">yearlyBuy</span><span class="p">:</span> <span class="n">UIButton</span><span class="p">!</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewWillLayoutSubviews</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kc">super</span><span class="p">.</span><span class="n">viewWillLayoutSubviews</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">updateUI</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewWillTransition</span><span class="p">(</span><span class="n">to</span> <span class="n">size</span><span class="p">:</span> <span class="n">CGSize</span><span class="p">,</span> <span class="n">with</span> <span class="n">coordinator</span><span class="p">:</span> <span class="n">UIViewControllerTransitionCoordinator</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kc">super</span><span class="p">.</span><span class="n">viewWillTransition</span><span class="p">(</span><span class="n">to</span><span class="p">:</span> <span class="n">size</span><span class="p">,</span> <span class="n">with</span><span class="p">:</span> <span class="n">coordinator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">updateUI</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">updateUI</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// update layour for diff device (iPhone/iPad) and view (Landscape/Protraint)</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>SubscriptionSheetPresentationController.swift</code></li>
</ul>
<p>å®šåˆ¶è®¢é˜…é¡µé¢çš„å®½åº¦å’Œé«˜åº¦</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">SubscriptionSheetPresentationController</span><span class="p">:</span> <span class="n">UIPresentationController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">override</span> <span class="kd">var</span> <span class="nv">frameOfPresentedViewInContainerView</span><span class="p">:</span> <span class="n">CGRect</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nv">screenWidth</span> <span class="p">=</span> <span class="n">UIScreen</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">width</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nv">screenHeight</span> <span class="p">=</span> <span class="n">UIScreen</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">height</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">         <span class="c1">// default is iPhone+portrait for non-SE</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nv">width</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="n">screenWidth</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nv">height</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="n">screenHeight</span> <span class="o">*</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nv">x</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="kd">var</span> <span class="nv">yOffset</span> <span class="p">=</span> <span class="mf">1.0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">UIDevice</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">userInterfaceIdiom</span> <span class="p">==</span> <span class="p">.</span><span class="n">phone</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">UIDevice</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">isLandscape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">width</span> <span class="p">=</span> <span class="n">screenWidth</span> <span class="o">/</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">                <span class="n">height</span> <span class="p">=</span> <span class="n">screenHeight</span> <span class="o">*</span> <span class="mf">0.95</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">screenHeight</span> <span class="o">&lt;</span> <span class="mi">700</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">height</span> <span class="p">=</span> <span class="n">screenHeight</span> <span class="o">*</span> <span class="mf">2.5</span><span class="o">/</span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// iPad or Mac</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">UIDevice</span><span class="p">.</span><span class="n">current</span><span class="p">.</span><span class="n">orientation</span><span class="p">.</span><span class="n">isLandscape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">width</span> <span class="p">=</span> <span class="n">screenWidth</span> <span class="o">/</span> <span class="mf">2.5</span>
</span></span><span class="line"><span class="cl">                <span class="n">height</span> <span class="p">=</span> <span class="n">screenHeight</span> <span class="o">*</span> <span class="mf">0.65</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">width</span> <span class="p">=</span> <span class="n">screenWidth</span> <span class="o">/</span> <span class="mf">1.8</span>
</span></span><span class="line"><span class="cl">                <span class="n">height</span> <span class="p">=</span> <span class="n">screenHeight</span> <span class="o">*</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">yOffset</span> <span class="p">=</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">x</span> <span class="p">=</span> <span class="p">(</span><span class="n">screenWidth</span> <span class="o">-</span> <span class="n">width</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">CGRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                      <span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="n">containerView</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">height</span><span class="p">)</span> <span class="o">*</span> <span class="n">yOffset</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                      <span class="n">width</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                      <span class="n">height</span><span class="p">:</span> <span class="n">height</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">containerViewWillLayoutSubviews</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kc">super</span><span class="p">.</span><span class="n">containerViewWillLayoutSubviews</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="kd">let</span> <span class="nv">presentedView</span> <span class="p">=</span> <span class="n">presentedView</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">presentedView</span><span class="p">.</span><span class="n">frame</span> <span class="p">=</span> <span class="n">frameOfPresentedViewInContainerView</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨éœ€è¦å¼¹å‡ºè®¢é˜…é¡µé¢çš„ <code>UIViewController</code> ä¸­ç›´æ¥è°ƒç”¨å³å¯ï¼š</p>
<ul>
<li><code>&lt;Any&gt;ViewController.swift</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">class</span> <span class="p">&lt;</span><span class="nb">Any</span><span class="p">&gt;</span><span class="n">ViewController</span><span class="p">:</span> <span class="p">&lt;</span><span class="n">XXX</span><span class="p">&gt;</span><span class="n">ViewController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">func</span> <span class="nf">showSubscription</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SubscriptionSheetPresenter</span><span class="p">.</span><span class="n">instance</span><span class="p">.</span><span class="n">presentBottomSheetForSubscription</span><span class="p">(</span><span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>&lt;Another&gt;ViewController.swift</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">class</span> <span class="p">&lt;</span><span class="n">Anyother</span><span class="p">&gt;</span><span class="n">ViewController</span><span class="p">:</span> <span class="p">&lt;</span><span class="n">YYY</span><span class="p">&gt;</span><span class="n">ViewController</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">func</span> <span class="nf">goPremium</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">SubscriptionSheetPresenter</span><span class="p">.</span><span class="n">instance</span><span class="p">.</span><span class="n">presentBottomSheetForSubscription</span><span class="p">(</span><span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="usefull-links">Usefull links</h2>
<ul>
<li><a href="https://blog.tomatostore.top/posts/2023/04/swift-block-based-animation/">Swift: beginAnimations(_:context:) was deprecated in iOS 13.0: Use the block-based animation API instead
</a></li>
<li><a href="https://blog.tomatostore.top/posts/2023/04/swift-substring/">Swift String Substring
</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>github: REMOTE HOST IDENTIFICATION HAS CHANGED</title>
      <link>https://blog.tomatostore.top/posts/2023/07/github-remote-host-identif-change/</link>
      <pubDate>Sun, 09 Jul 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/07/github-remote-host-identif-change/</guid>
      <description>ä¿®æ”¹hostsè®¿é—®github</description>
      <content:encoded><![CDATA[<p><code>git pull</code> å‡ºç°äº†å¦‚ä¸‹å¼€å¤´çš„é”™è¯¯æç¤ºï¼š</p>
<pre tabindex="0"><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
</code></pre><h2 id="è§£å†³æ–¹æ³•-update-know_hosts">è§£å†³æ–¹æ³•: update know_hosts</h2>
<ol>
<li>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤ <code>~/.ssh/know_hosts</code> ä¸­çš„ <code>github.com</code> è®°å½•ï¼š</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ssh-keygen -R github.com
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¯ä»¥ä½¿ç”¨ <code>ssh-keygen -l -f ~/.ssh/known_hosts</code> å‘½ä»¤æŸ¥çœ‹ <code>~/.ssh/know_hosts</code></li>
</ul>
<ol start="2">
<li>å†æ¬¡æ‰§è¡Œ <code>git pull</code> å‘½ä»¤ï¼Œä¼šæœ‰å¦‚ä¸‹æç¤ºï¼Œè¾“å…¥ <code>yes</code> åç»§ç»­å³å¯ã€‚</li>
</ol>
<pre tabindex="0"><code>The authenticity of host &#39;github.com (ipaddress)&#39; can&#39;t be established.
ED25519 key fingerprint is SHA256:+XDFLKJWEOIRXXX.
This key is not known by any other names
Are you sure you want to continue connecting (yes/no/[fingerprint])?
</code></pre><ol start="3">
<li>å¦‚æœè¿˜æ˜¯æ— æ³•è®¿é—®ï¼Œæˆ–è€…å‡ºç° <a href="mailto:git@github.com">git@github.com</a> è¾“å…¥å¯†ç çš„æç¤ºï¼Œå…ˆå‚è€ƒ <a href="https://blog.tomatostore.top/posts/2023/07/github-ping-return-127-or-update-hosts/">è¿™ç¯‡æ–‡ç« æ›´æ–°hosts</a>åï¼Œå†æ›´æ–° <code>~/.ssh/know_hosts</code>ã€‚</li>
</ol>
]]></content:encoded>
    </item>
    
    <item>
      <title>Ping github.com returns 127.0.0.1</title>
      <link>https://blog.tomatostore.top/posts/2023/07/github-ping-return-127-or-update-hosts/</link>
      <pubDate>Sun, 09 Jul 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/07/github-ping-return-127-or-update-hosts/</guid>
      <description>ä¿®æ”¹hostsè®¿é—®github</description>
      <content:encoded><![CDATA[<p>æµè§ˆå™¨ä¸­æ— æ³•è®¿é—® <code>github.com</code>ï¼Œå‡ºç° <strong>æ— æ³•è®¿é—®æ­¤ç½‘ç«™</strong> çš„æç¤ºã€‚</p>
<p>å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>ping github.com</code> å‡ºç°å¦‚ä¸‹ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ping github.com
</span></span><span class="line"><span class="cl">PIING github.com<span class="o">(</span>127.0.0.1<span class="o">)</span>: <span class="m">56</span> data bytes
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è§£å†³æ–¹æ³•-update-hostst">è§£å†³æ–¹æ³•: update hostst</h2>
<p>é€šè¿‡IP æŸ¥è¯¢ç½‘ç«™ï¼ˆå¦‚ï¼š<code>www.ipaddress.com</code>ï¼‰æŸ¥åˆ° <code>github.com</code> çš„ IP (å¦‚ï¼š140.82.113.3)ï¼Œåœ¨ç³»ç»Ÿ <code>hosts</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸€è¡Œï¼š</p>
<pre tabindex="0"><code>140.82.113.3 github.com 
</code></pre><p>å¦‚æœåœ¨ <code>git pull</code> æ—¶å‡ºç° <code>REMOTE HOST IDENTIFICATION HAS CHANGED</code> çš„æç¤ºï¼Œå¯å‚è€ƒ <a href="https://blog.tomatostore.top/posts/2023/07/github-remote-host-identif-change">github: REMOTE HOST IDENTIFICATION HAS CHANGED</a>.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>C&#43;&#43; template&lt;class&gt; v.s. template&lt;typename&gt;</title>
      <link>https://blog.tomatostore.top/posts/2023/06/cpp-template-parameter-class-vs-typename/</link>
      <pubDate>Wed, 21 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/06/cpp-template-parameter-class-vs-typename/</guid>
      <description>C&#43;&#43;æ¨¡æ¿ç”¨typenameå’Œclassæœ‰å•¥åŒºåˆ«</description>
      <content:encoded><![CDATA[<p><strong>Q:</strong> <code>C++</code> æ¨¡æ¿ç”¨ <code>typename</code> å’Œ <code>class</code> æœ‰å•¥åŒºåˆ«?
<strong>A:</strong> æ— è®ºä½¿ç”¨ <code>class</code> è¿˜æ˜¯ <code>typename</code> å£°æ˜ç±»å‹å‚æ•°ï¼Œæ•ˆæœéƒ½æ˜¯ç›¸åŒçš„ï¼Œé€‰æ‹©ä½¿ç”¨å“ªä¸ªå…³é”®å­—ä¸»è¦å–å†³äºä¸ªäººæˆ–å›¢é˜Ÿçš„åå¥½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¾ƒä¸ºå¸¸è§çš„åšæ³•æ˜¯åœ¨å£°æ˜ç±»æ¨¡æ¿æ—¶ä½¿ç”¨ classï¼Œè€Œåœ¨åµŒå¥—ç±»å‹çš„å£°æ˜æˆ–æ¨¡æ¿å†…éƒ¨ä½¿ç”¨æ—¶åˆ™ä½¿ç”¨ typenameã€‚</p>
<hr>
<p>æ—©æœŸçš„ <code>C++</code> æ ‡å‡†å°† <code>class</code> ç”¨ä½œå£°æ˜ç±»å‹å‚æ•°çš„å…³é”®å­—ã€‚ä¸ºäº†æ”¯æŒ<em>æ¨¡æ¿å†…åµŒå¥—ç±»å‹</em>ï¼Œ<code>C++98</code> æ ‡å‡†å¼•å…¥äº† <code>typename</code>ï¼Œ åŒæ—¶ä¸ºäº†å…¼å®¹æ€§ï¼Œ<code>class</code> ä½œä¸ºæ¨¡æ¿ç±»å‹å£°æ˜çš„å…³é”®å­—ç»§ç»­ä¿ç•™ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// template&lt;class&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyClass1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// template&lt;typename&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">MyContainer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// internal usage
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="n">T</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// nested type
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">typename</span> <span class="n">MyContainer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">value_type</span> <span class="n">getValue</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
    </item>
    
    <item>
      <title>Godot 2D Sprite Animation</title>
      <link>https://blog.tomatostore.top/posts/2023/06/godot-2d-sprite-animation/</link>
      <pubDate>Wed, 21 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/06/godot-2d-sprite-animation/</guid>
      <description>å¦‚ä½•åœ¨ Godot ä¸­åˆ›å»º 2D Sprite åŠ¨ç”»</description>
      <content:encoded><![CDATA[<p>å®˜æ–¹æ–‡æ¡£ <a href="ttps://docs.godotengine.org/en/stable/tutorials/2d/2d_sprite_animation.html">2D Sprite Animation</a> ä»‹ç»äº† 3 ç§å®ç° 2D Sprite åŠ¨ç”»çš„æ–¹æ³•ã€‚</p>
<p>ç¬¬ä¸€ç§æ–¹æ³•é€‚ç”¨äº<strong>æ¯ä¸€å¸§çš„åŠ¨ç”»æ˜¯å•ç‹¬å›¾ç‰‡</strong>çš„æƒ…å†µã€‚åä¸¤ç§æ–¹å¼é€‚ç”¨äº<strong>å¤šä¸ªåŠ¨ç”»å¸§åœ¨ä¸€å¼ å›¾ç‰‡å†…</strong>çš„æƒ…å†µã€‚</p>
<h2 id="animatedsprite2då•ç‹¬çš„å›¾åƒå¸§"><code>AnimatedSprite2D</code>+å•ç‹¬çš„å›¾åƒå¸§</h2>
<p>è¿™ç§æ–¹å¼é€‚ç”¨äºå°†åŠ¨ç”»æ‹†åˆ†ä¸ºå•ç‹¬çš„å›¾åƒå¸§ï¼ˆframeï¼‰çš„æƒ…å†µã€‚
éœ€è¦å°†æ¯ä¸ªåŠ¨ç”»å¸§ä½œä¸ºå•ç‹¬çš„å›¾åƒå¯¼å…¥åˆ° Godot ä¸­ï¼Œå¹¶ä½¿ç”¨ <code>AnimatedSprite2D</code> èŠ‚ç‚¹æ¥åˆ›å»ºåŠ¨ç”»ã€‚é€šè¿‡åœ¨ <code>SpriteFrames</code> é¢æ¿ä¸­è®¾ç½®å¸§é€Ÿç‡å’Œæ·»åŠ åŠ¨ç”»å¸§ï¼Œå¯ä»¥æ§åˆ¶åŠ¨ç”»çš„æ’­æ”¾ã€‚</p>
<ol>
<li>ç‚¹å‡» <code>AnimatedSprite2D</code> çš„ <code>SpriteFrames</code> å±æ€§ï¼Œé€‰æ‹© <code>New SpriteFrames</code>.

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_new_spriteframes.webp" alt="AnimatedSprite2D - SpriteFrames - New SpriteFrames"  /></li>
<li>æ‹–æ‹½å•ä¸ªå¸§çš„å›¾ç‰‡åˆ° <code>SpriteFrames</code>

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_spriteframes_done.webp" alt="add-individual-frames-to-spriteFrames"  /></li>
</ol>
<h2 id="animatedsprite2dspritesheet"><code>AnimatedSprite2D</code>+<code>SpriteSheet</code></h2>
<p>è¿™ç§æ–¹å¼é€‚ç”¨äºä½¿ç”¨ç²¾çµè¡¨å•ï¼ˆsprite sheetï¼‰çš„æƒ…å†µï¼Œç²¾çµè¡¨å•æ˜¯æŒ‡å°†æ‰€æœ‰åŠ¨ç”»å¸§åˆå¹¶åˆ°ä¸€ä¸ªå›¾åƒä¸­ã€‚</p>
<ol>
<li>ç‚¹å‡» <code>AnimatedSprite2D</code> çš„ <code>SpriteFrames</code> å±æ€§ï¼Œé€‰æ‹© <code>New SpriteFrames</code>.</li>
<li>åœ¨ <code>SpriteFrames</code> é¢æ¿ä¸­é€‰æ‹© <code>Add frames from a Sprite Sheet</code>

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_add_from_spritesheet.webp" alt="add-frames-from-a-sprite-sheet"  /></li>
<li>é€‰æ‹©æƒ³è¦å¯¼å…¥çš„ç²¾çµè¡¨å•ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­è¾“å…¥è¡Œä¸åˆ—çš„æ•°é‡å°†å›¾ç‰‡åˆ†æˆå¤šä¸ªå¸§ï¼ˆframeï¼‰ï¼Œç”¨é¼ æ ‡é€‰æ‹©ç›¸åº”çš„å¸§å¯¼å…¥ã€‚

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_spritesheet_select_rows.webp" alt="select-frames"  /></li>
</ol>
<p>åˆ°æ­¤ä¸ºæ­¢çš„å‰ä¸¤ç§ç”¨ <code>AnimatedSprete2D</code> å®ç°çš„åŠ¨ç”»éƒ½å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ <code>play()</code> å’Œ <code>stop()</code> æ¥æ§åˆ¶ã€‚ä»¥ <code>GDScropt</code> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">extends</span> <span class="nx">CharacterBody2D</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">onready</span> <span class="kd">var</span> <span class="nx">_animated_sprite</span> <span class="o">=</span> <span class="nx">$AnimatedSprite2D</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">func</span> <span class="nx">_process</span><span class="p">(</span><span class="nx">_delta</span><span class="p">)</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">Input</span><span class="p">.</span><span class="nx">is_action_pressed</span><span class="p">(</span><span class="s2">&#34;ui_right&#34;</span><span class="p">)</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">_animated_sprite</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">&#34;run&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">_animated_sprite</span><span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="sprite2danimationplayerspritesheet"><code>Sprite2D</code>+<code>AnimationPlayer</code>+<code>SpriteSheet</code></h2>
<ol>
<li>é€‰ä¸­ <code>Sprite2D</code> èŠ‚ç‚¹ï¼Œæ‹–æ‹½ç²¾çµè¡¨å•åˆ° <code>Texture</code> ï¼Œè®¾ç½®ç›¸åº”çš„ <code>Hframes</code> å’Œ <code>Vframes</code> æ¥åˆ‡åˆ†æˆå•ä¸ªå¸§ã€‚

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_setframes.webp" alt="sprite2d-texture"  /></li>
<li>é€‰ä¸­ <code>AnimationPlayer</code> èŠ‚ç‚¹ï¼Œç‚¹å‡» <code>Animation</code> æŒ‰é’®ï¼Œæ¥ç€ç‚¹ <code>New</code>ï¼Œè¾“å…¥åå­—ï¼Œè®¾ç½®åŠ¨ç”»æ—¶é•¿å’Œå¾ªç¯ã€‚

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_new_animation.webp" alt="animation-setting"  /></li>
<li>åœ¨ <code>Animation</code> çš„æ—¶é—´è½´ä¸Šé€‰æ‹©æ’å…¥ç‚¹ï¼Œåœ¨ <code>Sprite2D</code> çš„ <code>Frame</code> å±æ€§è®¾ç½®ä¸­é€‰æ‹©å¯¹åº”çš„å¸§ï¼Œç‚¹ <code>key</code> ï¼ˆé’¥åŒ™ï¼‰å›¾æ ‡ï¼Œå°†ç›¸åº”çš„å¸§æ’å…¥æ—¶é—´è½´ã€‚å¯¹å…¶ä½™å¸§é‡å¤æ“ä½œã€‚

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_new_track.webp" alt="click-key-to-add-frame"  />

  <img loading="lazy" src="https://docs.godotengine.org/en/stable/_images/2d_animation_full_animation.webp" alt="multi-frames-in-animation"  /></li>
</ol>
<p>å¯¹ <code>AnimationPlayer</code> ä¹Ÿå¯ç”¨é€šè¿‡ä»£ç æ§åˆ¶åŠ¨ç”»ã€‚æ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">extends</span> <span class="nx">CharacterBody2D</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">@</span><span class="nx">onready</span> <span class="kd">var</span> <span class="nx">_animation_player</span> <span class="o">=</span> <span class="nx">$AnimationPlayer</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">func</span> <span class="nx">_process</span><span class="p">(</span><span class="nx">_delta</span><span class="p">)</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">Input</span><span class="p">.</span><span class="nx">is_action_pressed</span><span class="p">(</span><span class="s2">&#34;ui_right&#34;</span><span class="p">)</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">_animation_player</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s2">&#34;walk&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">_animation_player</span><span class="p">.</span><span class="nx">stop</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æœ¬æ–‡åªæ˜¯æ¦‚è¿°ï¼Œè¯¦æƒ…å‚çœ‹<a href="https://docs.godotengine.org/en/stable/tutorials/2d/2d_sprite_animation.html">åŸæ–‡</a>.</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„æ—¥å¿—çº§åˆ«ï¼ˆlog levelï¼‰</title>
      <link>https://blog.tomatostore.top/posts/2023/06/loglevel-introduction/</link>
      <pubDate>Tue, 20 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/06/loglevel-introduction/</guid>
      <description>Log Level Introduction</description>
      <content:encoded><![CDATA[<h2 id="æ—¥å¿—çº§åˆ«çš„å†å²">æ—¥å¿—çº§åˆ«çš„å†å²ï¼š</h2>
<p><code>æ—¥å¿—çº§åˆ«ï¼ˆlog levelï¼‰</code>èµ·æºäº 20 ä¸–çºª 80 å¹´ä»£çš„ç”± <code>Eric Allman</code> å¼€å‘çš„é¡¹ç›® <code>Sendmail</code> ã€‚è¯¥é¡¹ç›®éœ€è¦ä¸€ç§æ—¥å¿—è®°å½•è§£å†³æ–¹æ¡ˆï¼Œè¿™æœ€ç»ˆå¯¼è‡´äº† <code>System Logging Protocolï¼ˆSyslogï¼‰</code> çš„åˆ›å»ºä»¥åŠä¸åŒæ—¥å¿—çº§åˆ«çš„æ¦‚å¿µã€‚åæ¥ <code>Syslog</code> è¢«å¹¿æ³›åº”ç”¨äºå„ç§åº”ç”¨ç¨‹åºï¼Œå¹¶æˆä¸ºç³»ç»Ÿæ—¥å¿—å’Œäº‹ä»¶æ¶ˆæ¯çš„æ ‡å‡†åè®®ã€‚</p>
<h2 id="æ—¥å¿—çº§åˆ«">æ—¥å¿—çº§åˆ«</h2>
<p>æŒ‰é‡è¦æ€§é€’å‡æ’åˆ—ï¼š</p>
<ul>
<li>OFFï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ã€‚</li>
<li>FATALï¼šè¡¨ç¤ºåº”ç”¨ç¨‹åºå³å°†å‘ç”Ÿä¸¥é‡é—®é¢˜æˆ–æ•°æ®æŸåï¼Œæ„å‘³ç€åº”ç”¨ç¨‹åºå¤„äºç¾éš¾æ€§çŠ¶æ€ï¼Œé‡è¦åŠŸèƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚</li>
<li>ERRORï¼šè¡¨ç¤ºæ— æ³•è®¿é—®æœåŠ¡æˆ–æ–‡ä»¶ç­‰é‡è¦æ•…éšœï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ç»§ç»­è¿è¡Œï¼Œä½†éœ€è¦åŠæ—¶å¤„ç†ã€‚</li>
<li>WARNï¼šè¡¨ç¤ºæ£€æµ‹åˆ°æ„å¤–é—®é¢˜ï¼Œå¯èƒ½ä¼šå½±å“ç‰¹å®šè¿›ç¨‹çš„è¿è¡Œï¼Œä½†ä¸ä¼šå¯¹åº”ç”¨ç¨‹åºé€ æˆæŸå®³ã€‚</li>
<li>INFOï¼šè®°å½•åº”ç”¨ç¨‹åºçš„æ­£å¸¸è¡Œä¸ºï¼Œå¦‚æœåŠ¡å¯åŠ¨æˆ–åœæ­¢ã€æ•°æ®åº“æ·»åŠ ç­‰ï¼Œé€šå¸¸ä¸éœ€è¦è·Ÿè¿›å¤„ç†ã€‚</li>
<li>DEBUGï¼šæä¾›è¯¦ç»†çš„è¯Šæ–­ä¿¡æ¯ï¼Œç”¨äºæ•…éšœè¯Šæ–­ã€æ’æŸ¥æˆ–æµ‹è¯•åº”ç”¨ç¨‹åºã€‚</li>
<li>TRACEï¼šæ•è·åº”ç”¨ç¨‹åºè¡Œä¸ºçš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”DEBUGçº§åˆ«æ›´ç»†ç²’åº¦ï¼Œç”¨äºæŸ¥çœ‹ä»£ç ä¸­çš„å‚æ•°æˆ–è§£é‡Šç®—æ³•çš„æ­¥éª¤ã€‚</li>
<li>ALLï¼šè®°å½•æ‰€æœ‰å®šä¹‰çš„æ—¥å¿—çº§åˆ«ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰æ—¥å¿—çº§åˆ«ï¼Œç›¸å½“äºç»¼åˆæ‰€æœ‰çº§åˆ«çš„æ—¥å¿—ã€‚</li>
</ul>
<h2 id="å¸¸ç”¨æ—¥å¿—åº“">å¸¸ç”¨æ—¥å¿—åº“</h2>
<table>
  <thead>
      <tr>
          <th>ç¼–ç¨‹è¯­è¨€</th>
          <th>æ—¥å¿—åº“</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>C++</td>
          <td><a href="https://github.com/gabime/spdlog">spdlog</a>, <a href="https://www.boost.org/doc/libs/1_75_0/libs/log/doc/html/index.html">Boost.Log</a></td>
      </tr>
      <tr>
          <td>Java</td>
          <td><a href="https://logging.apache.org/log4j/2.x/">Log4j</a>, <a href="http://www.slf4j.org/">Slf4j</a></td>
      </tr>
      <tr>
          <td>Python</td>
          <td><a href="https://docs.python.org/3/library/logging.html">Python logging</a>, <a href="https://github.com/Delgan/loguru">Loguru</a></td>
      </tr>
      <tr>
          <td>JavaScript</td>
          <td><a href="https://github.com/winstonjs/winston">Winston</a>, <a href="https://github.com/trentm/node-bunyan">Bunyan</a></td>
      </tr>
      <tr>
          <td>C#</td>
          <td><a href="https://nlog-project.org/">NLog</a>, <a href="https://serilog.net/">Serilog</a></td>
      </tr>
      <tr>
          <td>Go</td>
          <td><a href="https://github.com/sirupsen/logrus">logrus</a>, <a href="https://github.com/uber-go/zap">zap</a></td>
      </tr>
      <tr>
          <td>Ruby</td>
          <td><a href="https://github.com/colbygk/log4r">Log4r</a>, <a href="https://ruby-doc.org/stdlib-3.0.2/libdoc/logger/rdoc/Logger.html">Logger</a></td>
      </tr>
      <tr>
          <td>PHP</td>
          <td><a href="https://github.com/Seldaek/monolog">Monolog</a>, <a href="https://laravel.com/docs/8.x/logging">Laravel Log</a></td>
      </tr>
  </tbody>
</table>
]]></content:encoded>
    </item>
    
    <item>
      <title>VSCode: Markdown é¢„è§ˆæ”¯æŒ PlantUML</title>
      <link>https://blog.tomatostore.top/posts/2023/06/vscode-preview-markdown-with-plantuml/</link>
      <pubDate>Fri, 16 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/06/vscode-preview-markdown-with-plantuml/</guid>
      <description>Dot Executable: /opt/local/bin/dot</description>
      <content:encoded><![CDATA[<p>æƒ³åœ¨ VSCode ä¸­é¢„è§ˆ PlantUML æ ¼å¼çš„æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=jebbs.plantuml">PlantUML Extension</a> æ¥å®ç°ã€‚</p>
<p>å¦‚æœæƒ³åœ¨ Markdown æ–‡ä»¶ä¸­åµŒå…¥ä¸€æ®µ PlantUML è„šæœ¬å¹¶åœ¨ VSCode ä¸­é¢„è§ˆï¼Œå¯ä»¥å®‰è£… <a href="https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced">Markdown Preview Enahnced</a>.</p>
<p><img loading="lazy" src="/images/vscode-preview-plantuml-in-markdown.png" alt="Preview PlantUML in Markdown"  /></p>
<p>åœ¨ Linux çš„ VSCode ä¸­ï¼Œå¦‚æœåœ¨ Preview çš„æ—¶å€™ PlantUML å›¾å‡ºä¸æ¥å¹¶æœ‰å¦‚ä¸‹é”™è¯¯ï¼š</p>
<pre tabindex="0"><code>Dot Executable: /opt/local/bin/dot
File does not exist
Cannot find Graphviz. You should try
 
@startuml
testdot
@enduml
 
or
 
java -jar plantuml.jar -testdot
</code></pre><p>å¯ä»¥æ‰§è¡Œ <code>sudo apt-get install graphviz</code> å®‰è£… <code>graphviz</code> æ¥è§£å†³ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•ç”¨VLC Media Playeræˆªå–éƒ¨åˆ†è§†é¢‘</title>
      <link>https://blog.tomatostore.top/posts/2023/06/how-to-cut-videos-using-vlc/</link>
      <pubDate>Tue, 13 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/06/how-to-cut-videos-using-vlc/</guid>
      <description>æ¯”å¦‚åˆ é™¤è§†é¢‘ååŠéƒ¨åˆ†ã€åªä¿ç•™ä¸­é—´æƒ³è¦çš„éƒ¨åˆ†</description>
      <content:encoded><![CDATA[<p>VLC Media Playeræ˜¯ä¸€æ¬¾æµè¡Œçš„å…è´¹åª’ä½“æ’­æ”¾å™¨ï¼Œé™¤äº†æ’­æ”¾åŠŸèƒ½ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥ç”¨äºç®€å•çš„è§†é¢‘ç¼–è¾‘ã€‚
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨VLC Media Playeræˆªå–è§†é¢‘ã€‚</p>
<h2 id="æ­¥éª¤">æ­¥éª¤</h2>
<ol>
<li>ç”¨ VLC æ‰“å¼€ä½ è¦ç¼–è¾‘çš„è§†é¢‘ï¼Œæ’­æ”¾åˆ°æƒ³è¦æˆªå–çš„å¼€å§‹ä½ç½®ã€‚</li>
<li>å¹¶ç‚¹å‡»èœå•æ ä¸­çš„â€œè§†å›¾â€é€‰é¡¹ã€‚ç„¶åé€‰æ‹©â€œé«˜çº§æ§åˆ¶â€ä»¥æ˜¾ç¤ºé«˜çº§æ§åˆ¶é¢æ¿ã€‚
<img loading="lazy" src="/images/vlc-views-menu.png" alt="VLC View menu"  /></li>
<li>åœ¨åº•éƒ¨çš„æ§åˆ¶æ ä¸Šï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªçº¢è‰²åœ†åœˆçš„â€œè®°å½•â€æŒ‰é’®ã€‚</li>
<li>ç‚¹å‡»çº¢è‰²æŒ‰é’®ä»¥å¼€å§‹å½•åˆ¶ã€‚ç„¶åç‚¹å‡»æ’­æ”¾æŒ‰é’®å¼€å§‹æ’­æ”¾ä½ çš„è§†é¢‘ã€‚
<img loading="lazy" src="/images/vlc-record-and-play.png" alt="VLC Record and Play"  /></li>
<li>å½“è§†é¢‘æ’­æ”¾åˆ°ä½ æƒ³è¦åˆ é™¤çš„ä½ç½®æ—¶ï¼Œç‚¹å‡»çº¢è‰²å½•åˆ¶æŒ‰é’®åœæ­¢å½•åˆ¶ï¼Œä¹Ÿå¯ä»¥å…ˆåœæ­¢æ’­æ”¾ï¼Œå†åœæ­¢å½•åˆ¶ã€‚</li>
<li>æ­¤æ—¶ VLC å·²ç»å°†å½•åˆ¶çš„è§†é¢‘è‡ªåŠ¨ä¿å­˜ï¼Œä½†ä¸ä¼šæœ‰æç¤ºã€‚å¯ä»¥ä»å¦‚ä¸‹è·¯å¾„æ‰¾åˆ°å½•åˆ¶å¥½çš„è§†é¢‘ï¼š</li>
</ol>
<ul>
<li>Windows: <code>C:\Users\&lt;Username&gt;\Videos</code></li>
<li>macOS: <code>/Users/&lt;Username&gt;/Movies</code></li>
<li>Linux: <code>/home/&lt;Username&gt;/Videos</code></li>
</ul>
<p>è¿™ç§æ–¹æ³•å®é™…ä¸Šæ˜¯é€šè¿‡å½•åˆ¶ä¸€ä¸ªæ–°çš„è§†é¢‘æ–‡ä»¶æ¥è¾¾åˆ°æˆªå–è§†é¢‘(cut video)çš„ç›®çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥ç¼–è¾‘åŸå§‹è§†é¢‘æ–‡ä»¶ã€‚</p>
<p>å¦‚æœä½ éœ€è¦è¿›è¡Œæ›´å¤æ‚çš„è§†é¢‘ç¼–è¾‘æ“ä½œï¼Œå¦‚å‰ªåˆ‡ã€è£å‰ªã€åˆå¹¶ç­‰ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ä¸“ä¸šçš„è§†é¢‘ç¼–è¾‘è½¯ä»¶ï¼Œå¦‚Adobe Premiere Proã€Final Cut Proç­‰ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>é˜¿é‡Œäº‘åŸŸåè§£æ Github.io</title>
      <link>https://blog.tomatostore.top/posts/2023/06/github-pages-with-customized-domain-alicloud/</link>
      <pubDate>Sun, 11 Jun 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/06/github-pages-with-customized-domain-alicloud/</guid>
      <description>Github pages è‡ªå®šä¹‰åŸŸå</description>
      <content:encoded><![CDATA[<p>Github Page æä¾›äº†å…è´¹çš„åŸŸåæ¥æ­å»ºé™æ€ç½‘ç«™ï¼Œä½†å›½å†…è®¿é—®é€Ÿåº¦ä¸æ˜¯å¾ˆç†æƒ³ï¼Œç»è¿‡æœç´¢åå­¦ä¹ åˆ°å¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŸŸå+å›½å†…åŸŸåè§£ææ¥å®ç°å›½å†…æé€Ÿã€‚</p>
<p>æœ¬ç½‘ç«™æ˜¯ <code>Github page + Hugo</code>æ­å»ºçš„ï¼Œé»˜è®¤åœ°å€ <code>aidysun.github.io</code>ã€‚</p>
<ol>
<li>åŸŸåæ³¨å†Œ</li>
</ol>
<p>åœ¨<a href="https://wanwang.aliyun.com/domain/?spm=5176.100251.111252.17.13bb4f15ZkUpEQ">é˜¿é‡Œäº‘</a>ä¸­æ³¨å†Œè‡ªå·±çš„åŸŸåï¼Œå¦‚æœå¯¹åå­—å’Œåç¼€æ²¡æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯ï¼Œä»·æ ¼è¿˜æ˜¯å¾ˆç¾ä¸½çš„ã€‚
æˆ‘é€‰æ‹©çš„ <code>tomatostore.top</code> 3å¹´åªéœ€è¦ä¸€ç™¾å¤šå—é’±ã€‚</p>
<ol start="2">
<li>åŸŸåè§£æ</li>
</ol>
<p>ç™»é™†ã€é˜¿é‡Œäº‘ã€‘-ã€åŸŸåæ§åˆ¶å°ã€‘-ã€åŸŸåè§£æã€‘ï¼Œå¡«å†™å†…å®¹å‚è€ƒä¸‹å›¾ï¼š</p>
<p><img loading="lazy" src="/images/dns-analysis-ali-cloud.png" alt="dns analysis"  /></p>
<ol start="3">
<li>githubè®¾ç½®</li>
</ol>
<p>åœ¨ github.io çš„ repo è®¾ç½®ï¼Œé€‰æ‹© pages, åœ¨ Custom Domain ä¸­è¾“å…¥è‡ªå®šä¹‰çš„åŸŸåï¼Œä¿å­˜å³å¯ã€‚</p>
<p><img loading="lazy" src="/images/github-io-customize-domain-setting.png" alt="github io customize domain setting"  /></p>
<p>**æ³¨æ„âš **ï¸ï¼šè¿™ä¸€æ­¥ä¿å­˜ä¹‹åä¼šåœ¨ github.io çš„æ ¹ç›®å½•ä¸‹è‡ªåŠ¨æ·»åŠ ä¸€ä¸ª <code>CNAME</code> çš„æ–‡ä»¶ã€‚<code>CNAME</code>çš„å†…å®¹å°±æ˜¯åœ¨ setting ä¸­è®¾ç½®çš„ Custom domain çš„å†…å®¹ã€‚</p>
<p>å¦‚æœä½ çš„ç½‘ç«™å¹¶ä¸æ˜¯ç›´æ¥åœ¨ github.io ä¸‹ç®¡ç†çš„ï¼Œæ¯”å¦‚æ˜¯é€šè¿‡å…¶ä»– repo çš„actionæ›´æ–°åˆ° github.io çš„ repo çš„ã€‚é‚£ä¹ˆéœ€è¦ç¡®ä¿åœ¨åé¢è‡ªåŠ¨æ›´æ–°github.ioåä¹Ÿè¦æœ‰è¿™ä¸ªCNAMEæ–‡ä»¶ã€‚</p>
<p>æ¯”å¦‚æˆ‘ç”¨çš„æ˜¯ hugo åœ¨å¦ä¸€ä¸ªrepoä¸­ï¼Œé‚£æˆ‘éœ€è¦åœ¨ hugo çš„ static æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª CNAME æ–‡ä»¶ï¼Œå†…å®¹ä¸ºæˆ‘çš„customåŸŸåï¼šblog.tomatostore.topã€‚è¿™æ ·åœ¨hugo buildä¹‹åpushåˆ°github.ioçš„æ ¹ç›®å½•ä¸‹å°±ä¼šæœ‰ CNAMEã€‚</p>
<ul>
<li>æˆ‘çš„ç½‘ç«™ï¼š<a href="https://blog.tomatostore.top">https://blog.tomatostore.top</a></li>
<li>github: <a href="https://github.com/AidySun/aidysun.github.io">https://github.com/AidySun/aidysun.github.io</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Use customized class in std::map, std::set</title>
      <link>https://blog.tomatostore.top/posts/2023/05/custom-class-with-std-associative-container/</link>
      <pubDate>Fri, 19 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/05/custom-class-with-std-associative-container/</guid>
      <description>Make self-defined class comparable</description>
      <content:encoded><![CDATA[<p>æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>class A</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">A</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="o">~</span><span class="n">A</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">getVal</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">val</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="nf">setVal</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="n">val</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å½“å°è¯•æŠŠ class A çš„å¯¹è±¡å­˜åˆ° std::set æˆ–ä½œä¸ºkeyç”¨åœ¨ std:map ä¸­æ—¶ï¼Œä¼šæœ‰ç¼–è¯‘é”™è¯¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">A</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">a1</span><span class="p">.</span><span class="n">setVal</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">a2</span><span class="p">.</span><span class="n">setVal</span><span class="p">(</span><span class="o">-</span><span class="mi">200</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">map</span><span class="o">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">mapOfA</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">mapOfA</span><span class="p">[</span><span class="n">a1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#34;hello&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">mapOfA</span><span class="p">[</span><span class="n">a2</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#34;world&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">set</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="n">setOfA</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">setOfA</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">setOfA</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>compile error:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">/usr/include/c++/9/bits/stl_function.h: In instantiation of â€˜constexpr bool std::less&lt;_Tp&gt;::operator<span class="o">()(</span>const _Tp<span class="p">&amp;</span>, const _Tp<span class="p">&amp;</span><span class="o">)</span> const <span class="o">[</span>with <span class="nv">_Tp</span> <span class="o">=</span> A<span class="o">]</span>â€™:
</span></span><span class="line"><span class="cl">/usr/include/c++/9/bits/stl_map.h:497:32:   required from â€˜std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::mapped_type<span class="p">&amp;</span> std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::operator<span class="o">[](</span>const key_type<span class="p">&amp;</span><span class="o">)</span> <span class="o">[</span>with <span class="nv">_Key</span> <span class="o">=</span> A<span class="p">;</span> <span class="nv">_Tp</span> <span class="o">=</span> std::__cxx11::basic_string&lt;char&gt;<span class="p">;</span> <span class="nv">_Compare</span> <span class="o">=</span> std::less&lt;A&gt;<span class="p">;</span> <span class="nv">_Alloc</span> <span class="o">=</span> std::allocator&lt;std::pair&lt;const A, std::__cxx11::basic_string&lt;char&gt; &gt; &gt;<span class="p">;</span> std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::mapped_type <span class="o">=</span> std::__cxx11::basic_string&lt;char&gt;<span class="p">;</span> std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::key_type <span class="o">=</span> A<span class="o">]</span>â€™
</span></span><span class="line"><span class="cl">/home/rduis/Workspace/github/notesnotes/swift/src/custom-class-in-std-map.cpp:25:12:   required from here
</span></span><span class="line"><span class="cl">/usr/include/c++/9/bits/stl_function.h:386:20: error: no match <span class="k">for</span> â€˜operator&lt;â€™ <span class="o">(</span>operand types are â€˜const Aâ€™ and â€˜const Aâ€™<span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="m">386</span> <span class="p">|</span>       <span class="o">{</span> <span class="k">return</span> __x &lt; __y<span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>                ~~~~^~~~~
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="solution-1">solution 1:</h2>
<p>declare <code>operator &lt; </code> in class A:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">A</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="o">~</span><span class="n">A</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">getVal</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">val</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="nf">setVal</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="n">val</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// solution 1: operator &lt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">A</span> <span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.</span><span class="n">getVal</span><span class="p">();</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="solution-2">solution 2:</h2>
<ol>
<li>create a new class as comparator</li>
<li>modify map declaration:</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">A</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="o">~</span><span class="n">A</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">getVal</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">val</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="nf">setVal</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span> <span class="n">val</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// solution 2: delcare comparator
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">comparator</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="k">operator</span><span class="p">()(</span><span class="k">const</span> <span class="n">A</span><span class="o">&amp;</span> <span class="n">lhs</span><span class="p">,</span> <span class="k">const</span> <span class="n">A</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">getVal</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.</span><span class="n">getVal</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="why">Why</h2>
<ul>
<li>
<p><code>std::map</code> and <code>std::set</code> are <strong>sorted</strong> associative containers.</p>
</li>
<li>
<p>Sorting is done using the <strong>comparison function Compare</strong>.</p>
</li>
<li>
<p>Declaration of <code>std::map</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Key</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">T</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Compare</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Allocator</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">Key</span><span class="p">,</span> <span class="n">T</span><span class="o">&gt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">map</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Declaration of <code>std::map</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">  <span class="k">class</span> <span class="nc">Key</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="k">class</span> <span class="nc">Compare</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="k">class</span> <span class="nc">Allocator</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">set</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h2 id="ref">Ref</h2>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/container/map">https://en.cppreference.com/w/cpp/container/map</a></li>
<li><a href="https://stackoverflow.com/questions/1102392/how-can-i-use-stdmaps-with-user-defined-types-as-key">https://stackoverflow.com/questions/1102392/how-can-i-use-stdmaps-with-user-defined-types-as-key</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Xcodeè‡ªåŠ¨åˆ é™¤ç©ºè¡Œçš„ç™½å­—ç¬¦</title>
      <link>https://blog.tomatostore.top/posts/2023/05/xcode-remove-whitespaces-of-empty-lines/</link>
      <pubDate>Fri, 19 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/05/xcode-remove-whitespaces-of-empty-lines/</guid>
      <description>Auto remove spaces of empty lines</description>
      <content:encoded><![CDATA[<p>åœ¨ Xcode ç¼–è¾‘ä»£ç åç”¨ git æäº¤æ—¶ï¼Œå¦‚æœç©ºè¡Œå«æœ‰ç™½å­—ç¬¦ï¼ˆç©ºæ ¼æˆ–tabï¼‰ï¼Œä¼šæœ‰å¦‚ä¸‹æç¤ºï¼š</p>
<p><img loading="lazy" src="/images/whitespace-in-empty-line.png" alt="space-in-empty-line"  /></p>
<p><strong>é‚£ä¹ˆå¦‚ä½•èƒ½è‡ªåŠ¨åˆ é™¤ç©ºç™½è¡Œå¼€å¤´çš„ç©ºæ ¼å‘¢ï¼Ÿ</strong></p>
<ol>
<li>ç¼–è¾‘æ—¶è‡ªåŠ¨åˆ é™¤</li>
</ol>
<p>åœ¨ <code>Xcode</code> ä¸­, ä¾æ¬¡æ‰“å¼€ <code>[Preferences... -&gt; Text Editing -&gt; Editing -&gt; While Editing]</code>ï¼Œå‹¾é€‰ä¸¤ä¸ªé€‰é¡¹ï¼š</p>
<p><img loading="lazy" src="/images/xcode-while-editing.png" alt="xcode-while-editing"  /></p>
<p>ç„¶è€Œä»¥ä¸Šè®¾ç½®åªå¯¹åœ¨ç¼–è¾‘è¿‡ç¨‹ä¸­å‡ºç°çš„ç©ºç™½è¡Œä¸­çš„ç©ºæ ¼èµ·ä½œç”¨ï¼Œå¯¹äºå·²ç»å­˜åœ¨çš„æ–‡ä»¶ä¸ä¼šèµ·ä½œç”¨ã€‚</p>
<ol start="2">
<li>å‘½ä»¤è¡Œåˆ é™¤</li>
</ol>
<p>é‚£å¯¹å·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡åœ¨ Terminal ä¸­æ‰§è¡Œå‘½ä»¤æ¥ä¿®æ”¹ï¼Œæ¯”å¦‚ä¿®æ”¹æ‰€æœ‰ Swift/Objective-C çš„ä»£ç æ–‡ä»¶ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> &lt;folder of your project&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">find . -type f <span class="se">\(</span> -iname <span class="s2">&#34;*.swift&#34;</span> -o -iname <span class="s2">&#34;*.h&#34;</span> -o -iname <span class="s2">&#34;*.m&#34;</span> <span class="se">\)</span> -exec sed -i -e <span class="s2">&#34;s/^\( \{1,99\}\)*</span>$<span class="s2">//g&#34;</span> <span class="o">{}</span> <span class="se">\;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>code format å·¥å…·</li>
</ol>
<p>å¯ä»¥åœ¨æ¯æ¬¡é¡¹ç›®ç¼–è¯‘æ—¶ç»Ÿä¸€å¤„ç†ä»£ç æ ¼å¼ã€‚æ¯”å¦‚é€šè¿‡ <code>swiftlint</code>:</p>
<p><img loading="lazy" src="/images/whitespace-swiftlint-setting-in-xcode.png" alt="xcode-with-switlint"  /></p>
<p>å…³äºå…·ä½“é…ç½®å‚è€ƒ<code>swiftlint</code>çš„æ–‡æ¡£ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>[C&#43;&#43;11] Scoped Enumeration (enum class)</title>
      <link>https://blog.tomatostore.top/posts/2023/05/cpp-scoped-enum-class/</link>
      <pubDate>Thu, 18 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/05/cpp-scoped-enum-class/</guid>
      <description>Strong typed enums in C&#43;&#43;11</description>
      <content:encoded><![CDATA[<h2 id="traditional-enum-in-c">Traditional enum in C++</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">Week</span>        <span class="p">{</span><span class="n">Mon</span>   <span class="p">,</span><span class="n">Tue</span>   <span class="p">,</span><span class="n">Wed</span>  <span class="p">,</span><span class="n">Thu</span>  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">Season</span>      <span class="p">{</span><span class="n">Sprint</span><span class="p">,</span><span class="n">Summer</span><span class="p">,</span><span class="n">Fall</span> <span class="p">,</span><span class="n">Winter</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Week</span> <span class="n">w</span> <span class="o">=</span> <span class="n">Tue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Season</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Summer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="n">isEqual</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="o">==</span> <span class="n">s</span><span class="p">);</span> <span class="c1">// isEqual is true
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="problem">Problem</h3>
<p>éç±»å‹å®‰å…¨ï¼Œæ¯”å¦‚å¯¹<code>Week w</code>å’Œ<code>Season s</code>ä¸¤ä¸ªé€»è¾‘æ„ä¹‰ä¸Šä¸åŒç±»å‹çš„å˜é‡ä½œæ¯”è¾ƒï¼Œä¼šäº§ç”Ÿä¸åˆé€»è¾‘çš„ç»“æœï¼š<code>w == s</code> æ˜¯ <code>true</code>ã€‚</p>
<p>It&rsquo;s not safe, the result of <code>w == s</code> is <code>true</code> is not reasonalbe.</p>
<p>ä¸åŒç±»å‹çš„ enum æ¯”è¾ƒä¼šæœ‰ç¼–è¯‘è­¦å‘Š<code>warning</code>ï¼Œä½†åªæ˜¯è­¦å‘Šï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">warning: comparison between â€˜enum Weekâ€™ and â€˜enum Seasonâ€™ <span class="o">[</span>-Wenum-compare<span class="o">]</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>   bool <span class="nv">isEqual</span> <span class="o">=</span> <span class="o">(</span><span class="nv">w</span> <span class="o">==</span> s<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>                        ^
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="scoped-enum">Scoped enum</h2>
<ul>
<li><code>enum class</code> and <code>enum struct</code> are the same</li>
<li><code>enum class</code> is not a class</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">EnumOnly</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">Week</span> <span class="p">{</span> <span class="n">Mon</span><span class="p">,</span> <span class="n">Tue</span><span class="p">,</span> <span class="n">Wed</span><span class="p">,</span> <span class="n">Thu</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">Season</span> <span class="p">{</span> <span class="n">Sprint</span><span class="p">,</span> <span class="n">Summer</span><span class="p">,</span> <span class="n">Fall</span><span class="p">,</span> <span class="n">Winter</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace EnumOnly
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">EnumClass</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="k">class</span> <span class="nc">Month</span> <span class="p">{</span> <span class="n">Jan</span><span class="p">,</span> <span class="n">Feb</span><span class="p">,</span> <span class="n">Mar</span><span class="p">,</span> <span class="n">Apr</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="k">class</span> <span class="nc">Num</span> <span class="p">{</span> <span class="n">One</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Two</span><span class="p">,</span> <span class="n">Three</span><span class="p">,</span> <span class="n">Four</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="c1">// namespace EnumClass
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;EnumOnly::Week::Mon = &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">EnumOnly</span><span class="o">::</span><span class="n">Week</span><span class="o">::</span><span class="n">Mon</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;EnumClass::Month::Jan = &#34;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">EnumClass</span><span class="o">::</span><span class="n">Month</span><span class="o">::</span><span class="n">Jan</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Is EnumOnly::Week a class : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_class</span><span class="o">&lt;</span><span class="n">EnumOnly</span><span class="o">::</span><span class="n">Week</span><span class="o">&gt;::</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Is EnumOnly::Week a enum : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_enum</span><span class="o">&lt;</span><span class="n">EnumOnly</span><span class="o">::</span><span class="n">Week</span><span class="o">&gt;::</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Is EnumClass::Month a class : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_class</span><span class="o">&lt;</span><span class="n">EnumClass</span><span class="o">::</span><span class="n">Month</span><span class="o">&gt;::</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Is EnumClass::Month a enum : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">is_enum</span><span class="o">&lt;</span><span class="n">EnumClass</span><span class="o">::</span><span class="n">Month</span><span class="o">&gt;::</span><span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">EnumOnly</span><span class="o">::</span><span class="n">Week</span> <span class="n">w</span> <span class="o">=</span> <span class="n">EnumOnly</span><span class="o">::</span><span class="n">Tue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">EnumOnly</span><span class="o">::</span><span class="n">Season</span> <span class="n">s</span> <span class="o">=</span> <span class="n">EnumOnly</span><span class="o">::</span><span class="n">Summer</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">EnumClass</span><span class="o">::</span><span class="n">Month</span> <span class="n">m</span> <span class="o">=</span> <span class="n">EnumClass</span><span class="o">::</span><span class="n">Month</span><span class="o">::</span><span class="n">Feb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">EnumClass</span><span class="o">::</span><span class="n">Num</span> <span class="n">n</span> <span class="o">=</span> <span class="n">EnumClass</span><span class="o">::</span><span class="n">Num</span><span class="o">::</span><span class="n">Two</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">EnumClass</span><span class="o">::</span><span class="n">Num</span> <span class="n">n2</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">EnumClass</span><span class="o">::</span><span class="n">Num</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">EnumClass</span><span class="o">::</span><span class="n">Num</span> <span class="n">n3</span> <span class="o">=</span> <span class="n">EnumClass</span><span class="o">::</span><span class="n">Num</span><span class="o">::</span><span class="n">Three</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">w</span> <span class="o">==</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;w == s, ohh!&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>  <span class="c1">// unmeaningful
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;w != s&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="n">n2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;n == n2, yes&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;n != n2, why&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="n">n3</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;n == n3&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;n != n3, yes&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">  if (w == m) {
</span></span></span><span class="line"><span class="cl"><span class="cm">    cout &lt;&lt; &#34;w == m&#34;;
</span></span></span><span class="line"><span class="cl"><span class="cm">  } else {
</span></span></span><span class="line"><span class="cl"><span class="cm">    cout &lt;&lt; &#34;w != m&#34;;
</span></span></span><span class="line"><span class="cl"><span class="cm">  }
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">EnumOnly::Week::Mon <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">EnumClass::Month::Jan <span class="o">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">Is EnumOnly::Week a class : <span class="m">0</span>
</span></span><span class="line"><span class="cl">Is EnumOnly::Week a enum : <span class="m">1</span>
</span></span><span class="line"><span class="cl">Is EnumClass::Month a class : <span class="m">0</span>
</span></span><span class="line"><span class="cl">Is EnumClass::Month a enum : <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">w</span> <span class="o">==</span> s, ohh!
</span></span><span class="line"><span class="cl"><span class="nv">n</span> <span class="o">==</span> n2, yes
</span></span><span class="line"><span class="cl">n !<span class="o">=</span> n3, yes
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœç”¨ <code>==</code> æ¯”è¾ƒä¸¤ä¸ªä¸åŒç±»å‹çš„ <code>enum class</code> å¯¹è±¡ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚
æ¯”å¦‚ç”¨<code>if (w == m)</code>æ¯”è¾ƒ <code>enum Week</code> ç±»å‹çš„ <code>w</code> ä¸ <code>enum class Month</code> ç±»å‹çš„ <code>m</code> ä¼šäº§ç”Ÿå¦‚ä¸‹é”™è¯¯ <code>error</code> ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">error: no match <span class="k">for</span> â€˜operator<span class="o">==</span>â€™ <span class="o">(</span>operand types are â€˜EnumOnly::Weekâ€™ and â€˜EnumClass::Monthâ€™<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>   <span class="k">if</span> <span class="o">(</span><span class="nv">w</span> <span class="o">==</span> m<span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>       ~ ^~ ~
</span></span><span class="line"><span class="cl">      <span class="p">|</span>       <span class="p">|</span>    <span class="p">|</span>
</span></span><span class="line"><span class="cl">      <span class="p">|</span>       <span class="p">|</span>    EnumClass::Month
</span></span><span class="line"><span class="cl">      <span class="p">|</span>       EnumOnly::Week
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç”¨ <code>==</code> æ¯”è¾ƒä¸¤ä¸ªä¸åŒçš„ <code>enum class</code> å¯¹è±¡ä¹Ÿä¼šäº§ç”Ÿç›¸åŒçš„ç¼–è¯‘é”™è¯¯ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>git ssh REMOTE HOST IDENTIFICATION HAS CHANGED</title>
      <link>https://blog.tomatostore.top/posts/2023/05/git-remote-host-identification-has-changed/</link>
      <pubDate>Tue, 09 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/05/git-remote-host-identification-has-changed/</guid>
      <description>Could not read from remote repository</description>
      <content:encoded><![CDATA[<p>ä½¿ç”¨ <code>git</code> å‘½ä»¤æˆ– <code>ssh</code> å‘½ä»¤æ—¶å‡ºç°å¦‚ä¸‹æç¤ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span></span><span class="line"><span class="cl">@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
</span></span><span class="line"><span class="cl">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span></span><span class="line"><span class="cl">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
</span></span><span class="line"><span class="cl">Someone could be eavesdropping on you right now <span class="o">(</span>man-in-the-middle attack<span class="o">)</span>!
</span></span><span class="line"><span class="cl">It is also possible that a host key has just been changed.
</span></span><span class="line"><span class="cl">The fingerprint <span class="k">for</span> the RSA key sent by the remote host is
</span></span><span class="line"><span class="cl">SHA256:xxxxxxx.
</span></span><span class="line"><span class="cl">Please contact your system administrator.
</span></span><span class="line"><span class="cl">Add correct host key in /Users/xxx/.ssh/known_hosts to get rid of this message.
</span></span><span class="line"><span class="cl">Offending RSA key in /Users/xxx/.ssh/known_hosts:1
</span></span><span class="line"><span class="cl">Host key <span class="k">for</span> github.com has changed and you have requested strict checking.
</span></span><span class="line"><span class="cl">Host key verification failed.
</span></span><span class="line"><span class="cl">fatal: Could not <span class="nb">read</span> from remote repository.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Please make sure you have the correct access rights
</span></span><span class="line"><span class="cl">and the repository exists.
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="solution">Solution</h2>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œæ‰¾åˆ°è¾“å‡ºä¸­ <code>github.com</code> å¯¹åº”çš„ IP åœ°å€ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ssh-keygen -lf ~/.ssh/known_hosts
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="m">256</span> SHA256:xxxxxxxxxxxxxxxx github.com,13.250.177.223
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹æ‰¾åˆ°çš„ IP åœ°å€ï¼ˆe.g. <code>13.250.177.223</code>ï¼‰ï¼Œæ‰§è¡Œï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&gt;&gt;&gt;&gt; $ ssh-keygen -R 13.250.177.223
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®Œæˆï¼
æ‰§è¡ŒæˆåŠŸåä¼šæœ‰å¦‚ä¸‹è¾“å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Host 13.250.177.223 found: line 1</span>
</span></span><span class="line"><span class="cl">/Users/xxx/.ssh/known_hosts updated.
</span></span><span class="line"><span class="cl">Original contents retained as /Users/xxx/.ssh/known_hosts.old
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ‰§è¡Œ <code>git</code> æˆ– <code>ssh</code> å‘½ä»¤æ—¶ä¼šæœ‰å¦‚ä¸‹æç¤ºï¼Œè¾“å…¥ <code>yes</code> å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Are you sure you want to <span class="k">continue</span> connecting <span class="o">(</span>yes/no<span class="o">)</span>? 
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•åˆ é™¤Karabiner</title>
      <link>https://blog.tomatostore.top/posts/2023/05/macos-cannot-perform-action-because-locked/</link>
      <pubDate>Tue, 02 May 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/05/macos-cannot-perform-action-because-locked/</guid>
      <description>ä¸èƒ½å®Œæˆæ­¤æ“ä½œï¼Œå› ä¸ºé¡¹ç›®â€œKarabiner-Elements.appâ€å·²è¢«é”å®š</description>
      <content:encoded><![CDATA[<ol>
<li><a href="#%E6%96%B9%E6%B3%95%E4%B8%80">æ–¹æ³•ä¸€</a></li>
<li><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C">æ–¹æ³•äºŒ</a></li>
<li><a href="#%E6%96%B9%E6%B3%95%E4%B8%89">æ–¹æ³•ä¸‰</a></li>
</ol>
<p>macOS 12ï¼Œä» åº”ç”¨ç¨‹åº ä¸­æ‰‹åŠ¨åˆ é™¤ Karabiner æ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<pre tabindex="0"><code>ä¸èƒ½å®Œæˆæ­¤æ“ä½œï¼Œå› ä¸ºé¡¹ç›®â€œKarabiner-Elements.appâ€å·²è¢«é”å®šã€‚
ä¸èƒ½å®Œæˆæ­¤æ“ä½œï¼Œå› ä¸ºé¡¹ç›®â€œKarabiner-EventViewer.appâ€å·²è¢«é”å®šã€‚
</code></pre><h2 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h2>
<p><a href="https://karabiner-elements.pqrs.org/docs/manual/operation/uninstall/">å‚ç…§å®˜æ–¹ uninstall æ­¥éª¤</a>ï¼Œå¦‚æœ Karabiner-Elements å¯ä»¥è¿è¡Œï¼Œå¯ä»¥é€šè¿‡ç•Œé¢æ“ä½œå¸è½½(Uninstall -&gt; Launch uninstaller)ï¼Œä½†æˆ‘çš„ App å·²æ— æ³•æ‰§è¡Œã€‚</p>
<h2 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h2>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">bash <span class="s1">&#39;/Library/Application Support/org.pqrs/Karabiner-DriverKit-VirtualHIDDevice/scripts/uninstall/deactivate_driver.sh&#39;</span>
</span></span><span class="line"><span class="cl">sudo <span class="s1">&#39;/Library/Application Support/org.pqrs/Karabiner-Elements/uninstall.sh&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æˆ‘çš„ç¯å¢ƒä¸­å·²ç»æ²¡æœ‰ç›¸å…³ shï¼Œæ‰€ä»¥ç¬¬ä¸€æ¡æŒ‡ä»¤å·²ç»å¤±è´¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ bash <span class="s1">&#39;/Library/Application Support/org.pqrs/Karabiner-DriverKit-VirtualHIDDevice/scripts/uninstall/deactivate_driver.sh&#39;</span>
</span></span><span class="line"><span class="cl">bash: /Library/Application Support/org.pqrs/Karabiner-DriverKit-VirtualHIDDevice/scripts/uninstall/deactivate_driver.sh: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ–¹æ³•ä¸‰">æ–¹æ³•ä¸‰</h2>
<p>ç»ˆææ–¹æ¡ˆâ€”â€”é‡è£…ã€‚ä» <a href="https://karabiner-elements.pqrs.org/">https://karabiner-elements.pqrs.org/</a> ä¸‹è½½å®‰è£…ï¼Œç„¶åé€šè¿‡<a href="#%E6%96%B9%E6%B3%95%E4%B8%80">æ–¹æ³•ä¸€</a>åˆ é™¤ï¼š</p>
<p>
  <img loading="lazy" src="https://karabiner-elements.pqrs.org/docs/manual/operation/uninstall/images/uninstall-button@2x.png" alt="built-in uninstaller"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>error: git object file .git/objects/xxx is empty å’Œ fatal: cannot read existing object info</title>
      <link>https://blog.tomatostore.top/posts/2023/04/git-object-file-is-empty/</link>
      <pubDate>Thu, 20 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/git-object-file-is-empty/</guid>
      <description>index-pack failedï¼Œunable to unlink null bad address</description>
      <content:encoded><![CDATA[<h2 id="object-file-ç›¸å…³é”™è¯¯"><code>object file</code> ç›¸å…³é”™è¯¯</h2>
<p>æœ¬åœ°çš„<code>repo</code>åœ¨æ‰§è¡Œ<code>git log</code>å’Œ<code>git pull</code>å‘½ä»¤æ—¶å‡ºç°äº†å¦‚ä¸‹å…³äº<code>object file</code>çš„é”™è¯¯ï¼š</p>
<h3 id="git-log-é”™è¯¯"><code>git log</code> é”™è¯¯</h3>
<pre tabindex="0"><code>&gt;&gt;&gt;&gt; $ git log
error: object file .git/objects/7b/40exxx is empty
error: object file .git/objects/7b/40exxx is empty
fatal: loose object 7b40exxx (stored in .git/objects/7b/40exxx) is corrupt
</code></pre><h3 id="git-pull-é”™è¯¯"><code>git pull</code> é”™è¯¯</h3>
<pre tabindex="0"><code>&gt;&gt;&gt;&gt; $ git pull
error: object file .git/objects/7b/40exxx is empty
error: object file .git/objects/7b/40exxx is empty
remote: Counting objects: 479, done
remote: Finding sources: 100% (1388/1388)
error: object file .git/objects/7b/40exxx is empty
fatal: cannot read existing object info 40exxx
fatal: index-pack failed
warning: unable to unlink &#39;(null)&#39;: Bad address
</code></pre><h2 id="è§£å†³æ–¹æ³•-solution">è§£å†³æ–¹æ³• Solution</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> &lt;your_repo&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¤‡ä»½ .git</span>
</span></span><span class="line"><span class="cl">cp -r .git .git-bak
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> .git
</span></span><span class="line"><span class="cl">find . -type f -empty -delete -print
</span></span><span class="line"><span class="cl">git fsck --full
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†æ¬¡å°è¯•<code>git log</code> å’Œ <code>git pull</code>å‘½ä»¤ã€‚ä¸€åˆ‡æ­£å¸¸ååˆ é™¤å¤‡ä»½ <code>rm -r .git-bak</code>ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•ä» App Store Connect ä¸­åˆ é™¤ä¸€ä¸ªæœªå‘å¸ƒç‰ˆæœ¬</title>
      <link>https://blog.tomatostore.top/posts/2023/04/app-store-connect-rm-a-version/</link>
      <pubDate>Thu, 20 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/app-store-connect-rm-a-version/</guid>
      <description>è‹¹æœå•†åº—Connectæ— æ³•åˆ é™¤Appç‰ˆæœ¬</description>
      <content:encoded><![CDATA[<p>ä¸€ä¸ª iOS App æœ€æ–°å·²å‘å¸ƒç‰ˆæœ¬: <code>4.0</code>ï¼Œåœ¨ <code>App Store Connect</code> ä¸­æ·»åŠ äº†ä¸€ä¸ªç‰ˆæœ¬ <code>4.1</code>ï¼ŒçŠ¶æ€ä¸º <code>å‡†å¤‡æäº¤ï¼ˆPrepare for Submissionï¼‰</code> (æˆ–å…¶ä»–æœªå‘å¸ƒçŠ¶æ€)ã€‚</p>
<p>åæ¥æ”¹åŠ¨æœ‰ç‚¹å¤§ï¼Œæ‰“ç®—åšä¸ªå¤§ç‰ˆæœ¬å‡çº§â€”â€”æŠŠ<code>4.1</code> æ”¹ä¸º <code>5.0</code>ã€‚</p>
<p>æ²¡æœ‰æ‰¾åˆ°åˆ é™¤ <code>4.1</code> çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å¦‚ä¸‹é€”å¾„æ›´æ”¹ç‰ˆæœ¬ä¸º <code>5.0</code>:</p>
<p>åœ¨ <code>version 4.1</code> æ„å»ºé¡µé¢çš„ ç‰ˆæœ¬ä¿¡æ¯ï¼ˆVersion Informationï¼‰ æ¨¡å—ä¸‹å°†ç‰ˆæœ¬ <code>4.1</code> ç›´æ¥æ”¹ä¸º <code>5.0</code>:</p>
<p><img loading="lazy" src="/images/v4.1.png" alt="v5.0"  /></p>
<p>ç‚¹å‡» ä¿å­˜ï¼ˆSaveï¼‰æŒ‰é’®ï¼Œç‰ˆæœ¬ <code>4.1</code> å°±å˜æˆ <code>5.0</code> å•¦ï¼š</p>
<p><img loading="lazy" src="/images/v5.0.png" alt="v5.0"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•åœ¨ Markdown ä¸­æ’å…¥å›¾ç‰‡ï¼Œå¹¶è®¾ç½®å¤§å°</title>
      <link>https://blog.tomatostore.top/posts/2023/04/markdown-insert-picture-with-size/</link>
      <pubDate>Thu, 20 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/markdown-insert-picture-with-size/</guid>
      <description>Add pictures to Markdown, with hyperlink and size setting</description>
      <content:encoded><![CDATA[<p>æœ¬æ–‡ä»‹ç»åœ¨ <code>Markdown</code> æ–‡ä»¶ä¸­æ’å…¥å›¾ç‰‡çš„ä¸¤ç§æ–¹å¼ï¼š<a href="#markdown_insert_img">1.Markdownè¯­æ³•</a>ï¼Œ<a href="#html_insert_img">2.HTMLè¯­æ³•</a>ï¼›
ä»¥åŠ<a href="#image_size">å¦‚ä½•è®¾ç½®å›¾ç‰‡å°ºå¯¸</a>ï¼Œ<a href="#image_link">å¦‚ä½•ç»™å›¾ç‰‡åŠ é“¾æ¥</a>ã€‚</p>
<p><a name="markdown_insert_img"></a></p>
<h2 id="1-ä½¿ç”¨-markdown-è¯­æ³•">1. ä½¿ç”¨ <code>Markdown</code> è¯­æ³•</h2>
<ul>
<li>ä»¥å¹å·<code>!</code>å¼€å¤´</li>
<li>åé¢æ–¹æ‹¬å·<code>[]</code>ä¸­æ˜¯æ›¿æ¢æ–‡æœ¬ï¼ˆå›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºç»™è¯»è€…çš„æ–‡æœ¬ï¼‰</li>
<li>å†åé¢åœ†æ‹¬å·<code>()</code>ä¸­æ˜¯å›¾ç‰‡çš„è·¯å¾„ï¼ˆæœ¬åœ°è·¯å¾„ã€ç½‘ç»œè·¯å¾„ï¼‰</li>
<li>å¦‚æœéœ€è¦å›¾ç‰‡æ ‡é¢˜ï¼Œå¯ä»¥åœ¨è·¯å¾„åé¢ç”¨åŒå¼•å·<code>&quot;&quot;</code>æ‰©èµ·æ¥ã€‚
<em>âš ï¸ï¼šæ‰€æœ‰çš„<strong>ç¬¦å·å¿…é¡»æ˜¯åŠè§’/è‹±æ–‡ç¬¦å·</strong>ï¼Œä¸å¯ä»¥ä½¿ç”¨å…¨è§’/ä¸­æ–‡ç¬¦å·</em></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">![<span class="nt">æ›¿æ¢æ–‡æœ¬</span>](<span class="na">å›¾ç‰‡è·¯å¾„ &#34;å›¾ç‰‡æ ‡é¢˜&#34;</span>)
</span></span><span class="line"><span class="cl">![<span class="nt">alt text</span>](<span class="na">image_path &#34;image title&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¯”å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">![<span class="nt">substring is deprecated</span>](<span class="na">/images/xcode-while-editing.png &#34;XCodeå±å¹•æˆªå›¾&#34;</span>)
</span></span><span class="line"><span class="cl"><span class="ge">*Tips: å¯ä»¥åœ¨å›¾ç‰‡ä¸‹é¢ç”¨ä¸€è¡Œæ–œä½“çš„è¯´æ˜æ–‡æœ¬ã€‚å›¾ç‰‡æ ‡é¢˜ä¸ä¿è¯ä¸€å®šä¼šæ˜¾ç¤º*</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š
<img loading="lazy" src="/images/xcode-while-editing.png" alt="substring is deprecated"  title="XCodeå±å¹•æˆªå›¾"  />
<em>Tips: å¯ä»¥åœ¨å›¾ç‰‡ä¸‹é¢ç”¨ä¸€è¡Œæ–œä½“çš„è¯´æ˜æ–‡æœ¬ã€‚å›¾ç‰‡æ ‡é¢˜ä¸ä¿è¯ä¸€å®šä¼šæ˜¾ç¤º</em></p>
<p><a name="html_insert_img"></a></p>
<h2 id="2-ä½¿ç”¨-html-è¯­æ³•">2. ä½¿ç”¨ <code>HTML</code> è¯­æ³•</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">image</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://picsum.photos/400/200&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;ç½‘ç»œå›¾ç‰‡400*200&#34;</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ•ˆæœå¦‚ä¸‹ï¼š
<image src="https://picsum.photos/400/200" alt="ç½‘ç»œå›¾ç‰‡400*200" title="HTMLå›¾ç‰‡"></p>
<p><a name="image_size"></a></p>
<h3 id="å¦‚ä½•è®¾ç½®å›¾ç‰‡å°ºå¯¸">å¦‚ä½•è®¾ç½®å›¾ç‰‡å°ºå¯¸</h3>
<p>æ¨èä½¿ç”¨<code>HTML</code>çš„æ–¹å¼è®¾ç½®å›¾ç‰‡å¤§å°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">image</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://picsum.photos/400/200&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;ç½‘ç»œå›¾ç‰‡400*200&#34;</span> <span class="na">width</span><span class="o">=</span><span class="s">&#34;100&#34;</span> <span class="na">height</span><span class="o">=</span><span class="s">&#34;200&#34;</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><image src="https://picsum.photos/400/200" alt="ç½‘ç»œå›¾ç‰‡400*200" width="100" height="200">
<p>åŸç”Ÿ<code>Markdown</code>è¯­æ³•ä¸æ”¯æŒè®¾ç½®å›¾ç‰‡å°ºå¯¸ï¼Œ<code>Extended Markdown</code>æ”¯æŒå¦‚ä¸‹è¯­æ³•ã€‚ä¸æ˜¯æ‰€æœ‰å¼•æ“éƒ½æ”¯æŒï¼Œä¸ªäººä¸æ¨èã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">![<span class="nt">alt text</span>](<span class="na">image path &#34;image title&#34;</span>){ width=80%,height=120px }
</span></span></code></pre></td></tr></table>
</div>
</div><a name="image_link" />
<h3 id="å¦‚ä½•ç»™å›¾ç‰‡åŠ é“¾æ¥">å¦‚ä½•ç»™å›¾ç‰‡åŠ é“¾æ¥</h3>
<h4 id="markdownè¯­æ³•"><code>Markdown</code>è¯­æ³•</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">[<span class="nt">![å›¾ç‰‡æ›¿æ¢æ–‡æœ¬</span>](<span class="na">å›¾ç‰‡è·¯å¾„</span>)](é“¾æ¥åœ°å€)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¯”å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">[<span class="nt">![ç‚¹å‡»å›¾ç‰‡è·³è½¬AppStore</span>](<span class="na">https://mzstatic.com/image/AppIcon.png</span>)](https://apps.apple.com)
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://apps.apple.com/cn/app/id1528477391">
  <img loading="lazy" src="https://is4-ssl.mzstatic.com/image/thumb/Purple122/v4/72/62/8a/72628ae2-9c11-e676-acb2-5e207f07aa65/AppIcon-1x_U007emarketing-0-6-0-85-220.png/460x0w.webp" alt="ç‚¹å‡»å›¾ç‰‡è·³è½¬AppStore"  /></a></p>
<h4 id="htmlè¯­æ³•"><code>HTML</code>è¯­æ³•</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://apps.apple.com/cn/app/id1528477391&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://mzstatic.com/image/AppIcon.png&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><a href="https://apps.apple.com/cn/app/id1528477391">
    <img src="https://is4-ssl.mzstatic.com/image/thumb/Purple122/v4/72/62/8a/72628ae2-9c11-e676-acb2-5e207f07aa65/AppIcon-1x_U007emarketing-0-6-0-85-220.png/460x0w.webp" />
</a>
]]></content:encoded>
    </item>
    
    <item>
      <title>Bad owner or permissions on ssh config/gitå‘½ä»¤.sshæ–‡ä»¶æƒé™é”™è¯¯</title>
      <link>https://blog.tomatostore.top/posts/2023/04/ssh-file-permission/</link>
      <pubDate>Mon, 17 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/ssh-file-permission/</guid>
      <description>ssh Permissions are too open</description>
      <content:encoded><![CDATA[<p>åœ¨ macOS çš„ç»ˆç«¯ä¸­æ‰§è¡Œ <code>git pull</code> å‘½ä»¤æ—¶å‡ºç°å¦‚ä¸‹ä¸¤ä¸ªé”™è¯¯ï¼Œå¯ä»¥é€šè¿‡æ‰‹åŠ¨ä¿®æ”¹æƒé™æ¥ä¿®å¤ã€‚åŒæ ·é€‚ç”¨äº Linux ç³»ç»ŸåŠå…¶ä»– ssh ç›¸å…³åº”ç”¨å‡ºç°çš„æ­¤ç±»é”™è¯¯ã€‚</p>
<ul>
<li>é”™è¯¯ä¸€ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Bad owner or permissions on &lt;user&gt;/.ssh/config
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>é”™è¯¯äºŒï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span></span><span class="line"><span class="cl">@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @
</span></span><span class="line"><span class="cl">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
</span></span><span class="line"><span class="cl">Permissions 0640 for &#39;&lt;user&gt;/.ssh/id_rsa&#39; are too open.
</span></span><span class="line"><span class="cl">It is required that your private key files are NOT accessible by others.
</span></span><span class="line"><span class="cl">This private key will be ignored.
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="solution">Solution</h2>
<p>é€šè¿‡å¦‚ä¸‹æ–¹å¼æ‰‹åŠ¨ä¿®å¤ <code>.ssh</code> ç›®å½•åŠæ–‡ä»¶æƒé™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> ~/.ssh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo chmod <span class="m">700</span> .      <span class="c1"># .ssh dir</span>
</span></span><span class="line"><span class="cl">sudo chmod <span class="m">700</span> *.pub  <span class="c1"># PUBLIC key file</span>
</span></span><span class="line"><span class="cl">sudo chmod <span class="m">600</span> id_rsa <span class="c1"># PRIVATE key file</span>
</span></span><span class="line"><span class="cl">sudo chmod <span class="m">600</span> config <span class="c1"># config file</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="reference">Reference</h2>
<p>å…¶ä»–ç±»å‹æ–‡ä»¶çš„æƒé™åŠè¯¦ç»†æè¿°å‚è§ <code>man ssh</code>ï¼š</p>
<p><img loading="lazy" src="/images/man-ssh.png" alt="man ssh"  /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Swift String Substring</title>
      <link>https://blog.tomatostore.top/posts/2023/04/swift-substring/</link>
      <pubDate>Sun, 16 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/swift-substring/</guid>
      <description>&lt;p&gt;Swift ä¸­å¯¹ &lt;code&gt;String&lt;/code&gt; ç±»å‹çš„ &lt;code&gt;substring()&lt;/code&gt; æ–¹æ³•éƒ½è¢«æ ‡è®°ä¸º&lt;code&gt;ä¸æ¨è(deprecated)&lt;/code&gt;äº†ï¼Œé‚£è¯¥å¦‚ä½•å®ç° substring çš„åŠŸèƒ½å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://blog.tomatostore.top/images/swift-string-substring-deprecated.jpg&#34; alt=&#34;substring is deprecated&#34;  title=&#34;XCode ä¸­å¯¹String.substringçš„æç¤º&#34;  /&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®Xcodeçš„æç¤º&lt;strong&gt;å¯ä»¥ä½¿ç”¨&lt;code&gt;slicingï¼ˆåˆ‡ç‰‡ï¼‰&lt;/code&gt;çš„æ–¹å¼æ¥å®ç°&lt;code&gt;substring&lt;/code&gt;çš„åŠŸèƒ½&lt;/strong&gt;ï¼š&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Swift ä¸­å¯¹ <code>String</code> ç±»å‹çš„ <code>substring()</code> æ–¹æ³•éƒ½è¢«æ ‡è®°ä¸º<code>ä¸æ¨è(deprecated)</code>äº†ï¼Œé‚£è¯¥å¦‚ä½•å®ç° substring çš„åŠŸèƒ½å‘¢ï¼Ÿ</p>
<p><img loading="lazy" src="/images/swift-string-substring-deprecated.jpg" alt="substring is deprecated"  title="XCode ä¸­å¯¹String.substringçš„æç¤º"  /></p>
<p>æ ¹æ®Xcodeçš„æç¤º<strong>å¯ä»¥ä½¿ç”¨<code>slicingï¼ˆåˆ‡ç‰‡ï¼‰</code>çš„æ–¹å¼æ¥å®ç°<code>substring</code>çš„åŠŸèƒ½</strong>ï¼š</p>
<p>ä»¥å­—ç¬¦ä¸² <code>let str = &quot;0123456789&quot;</code> ä¸ºä¾‹:</p>
<h3 id="ä»å¼€å§‹åˆ°ç¬¬ä¸€ä¸ªç­‰äº5çš„å­—ç¬¦ä¹‹å‰çš„å­ä¸²">ä»å¼€å§‹åˆ°ç¬¬ä¸€ä¸ªç­‰äº<code>5</code>çš„å­—ç¬¦ä¹‹å‰çš„å­ä¸²ï¼š</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="k">if</span> <span class="kd">let</span> <span class="nv">firstFive</span> <span class="p">=</span> <span class="n">str</span><span class="p">.</span><span class="n">firstIndex</span><span class="p">(</span><span class="n">of</span><span class="p">:</span> <span class="s">&#34;5&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">substr</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">startIndex</span><span class="p">..&lt;</span><span class="n">firstFive</span><span class="p">]</span> <span class="c1">// substr = 01234</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æˆ–è€…å¯ä»¥çœç•¥å¼€å§‹çš„index</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nv">substr2</span> <span class="p">=</span> <span class="n">str</span><span class="p">[..&lt;</span><span class="n">firstFive</span><span class="p">]</span> <span class="c1">// substr2 = 01234</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»å¼€å¤´åˆ°ç¬¬ä¸€ä¸ªç­‰äº5çš„å­—ç¬¦">ä»å¼€å¤´åˆ°ç¬¬ä¸€ä¸ªç­‰äº<code>5</code>çš„å­—ç¬¦</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nv">substr</span> <span class="p">=</span> <span class="n">str</span><span class="p">[...</span><span class="n">firstFive</span><span class="p">]</span> <span class="c1">// substr = 012345</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»ç¬¬ä¸€ä¸ª5å¼€å§‹åˆ°å­—ç¬¦ä¸²æœ«å°¾">ä»ç¬¬ä¸€ä¸ª<code>5</code>å¼€å§‹åˆ°å­—ç¬¦ä¸²æœ«å°¾</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nv">substr</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">firstFive</span><span class="p">...]</span> <span class="c1">// 56789</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å‰7ä¸ªå­—ç¬¦">å‰7ä¸ªå­—ç¬¦</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nv">strstr</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">str</span><span class="p">.</span><span class="n">startIndex</span><span class="p">..&lt;</span><span class="n">str</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">startIndex</span><span class="p">,</span> <span class="n">offsetBy</span><span class="p">:</span> <span class="mi">7</span><span class="p">)]</span> <span class="c1">// 0123456</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>String</code>åˆ‡ç‰‡åè¿”å›çš„ç»“æœç±»å‹æ˜¯ <code>Substring</code>ã€‚</p>
<h2 id="struct-substring">struct Substring</h2>
<p><code>Substring</code> ä¸ä¼šä¸ºå­—ç¬¦ä¸²é¢å¤–åˆ†é…ç©ºé—´ï¼Œè€Œæ˜¯ä¸åŸå§‹å­—ç¬¦ä¸²å…±äº«å­˜å‚¨ã€‚</p>
<blockquote>
<p><strong>åˆ’é‡ç‚¹ï¼š</strong> å› ä¸º<code>Substring</code>ä¼šæŒæœ‰å¯¹åŸå§‹å­—ç¬¦å­˜å‚¨çš„å¼•ç”¨è®¡æ•°ï¼Œæ‰€ä»¥è¦ç¡®ä¿å­ä¸²çš„ç”Ÿå‘½å‘¨æœŸä¸é•¿äºæºå­—ç¬¦ä¸²çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥å…å†…å­˜æ³„æ¼ã€‚</p>
</blockquote>
<hr>
<blockquote>
<p>Ref: <a href="https://swiftunboxed.com/stdlib/substrings">https://swiftunboxed.com/stdlib/substrings</a></p>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>å…³äºASCIIã€DBCSã€Unicodeã€UCS-16ã€UTF-8å’ŒEncoding</title>
      <link>https://blog.tomatostore.top/posts/2023/04/unicode-and-character-sets/</link>
      <pubDate>Wed, 12 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/unicode-and-character-sets/</guid>
      <description>æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å­—ç¬¦é›†å‘å±•ç®€å²</description>
      <content:encoded><![CDATA[<p>å†™äºäºŒåå¹´å‰(<code>2003å¹´</code>)çš„æ–‡ç« ï¼Œç°åœ¨ä¾ç„¶å—ç”¨ã€‚</p>
<p>ä½ æ˜¯å¦æ›¾æ¢ç©¶è¿‡<code>HTTP</code>è¯·æ±‚ä¸­ç¥ç§˜çš„<code>Content-Type</code>ï¼Ÿä½ æ˜¯å¦æ›¾é‡åˆ°è¿‡æ»¡æ˜¯é—®å· <code>???? ???? ??</code> çš„ç”µå­é‚®ä»¶ï¼ˆæˆ–ç½‘é¡µï¼‰ï¼Ÿ</p>
<p>ä½œè€…å‘ç°å¤šæ•°ç¨‹åºå¼€å‘äººå‘˜å¹¶ä¸æ˜¯å®Œå…¨æ˜ç™½å­—ç¬¦é›†<code>character set</code>ã€ç¼–ç <code>encoding</code>ã€<code>Unicode</code>ã€<code>UTF-8</code>ç­‰ç›¸å…³è¯é¢˜ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å›é¡¾äº†å­—ç¬¦é›†çš„å‘å±•å†å²ã€‚</p>
<p><img loading="lazy" src="/images/ascii.png" alt="ASCII"  /></p>
<h2 id="asciiamerican-standard-code-for-information-interchangeç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç "><code>ASCII</code>ï¼ˆ<code>American Standard Code for Information Interchange</code>ï¼Œç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç ï¼‰</h2>
<p>å›åˆ°<code>Unix</code>æ­£åœ¨è¢«å‘æ˜çš„ä¸Šå¤æ—¶ä»£ï¼Œä¸€ä¸ªè‹±æ–‡å­—ç¬¦çš„<code>ASCII</code>å€¼å¯ä»¥ç”¨ <code>32-127</code> èŒƒå›´å†…çš„æ•°å­—æ¥è¡¨ç¤ºï¼ŒåŒ…æ‹¬è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œç¬¦å·ã€‚
æ¯”å¦‚ç©ºæ ¼æ˜¯<code>32</code>ï¼Œ<code>A</code>æ˜¯<code>65</code>ï¼Œ<code>a</code>æ˜¯<code>97</code>ã€‚ <code>0-31</code> è¢«ç”¨ä½œæ“ä½œç¬¦ã€‚å¦‚<code>10</code>ä¸ºæ¢è¡Œï¼Œ<code>13</code>ä¸ºå›è½¦ã€‚</p>
<p>è®¡ç®—æœºçš„æœ€å°å¯»å€å•ä½æ˜¯ä¸€å­—èŠ‚ï¼ˆ<code>8</code>ä¸ªæ¯”ç‰¹ï¼‰ï¼Œ<code>127</code>åªéœ€è¦<code>7</code>ä¸ªæ¯”ç‰¹ä½å°±èƒ½è¡¨ç¤ºï¼ˆ<code>2çš„7æ¬¡æ–¹=128</code>ï¼‰ï¼Œæ‰€ä»¥è¿˜æœ‰ä¸€æ¯”ç‰¹ä½ï¼ˆå€¼<code>128-255</code>ï¼‰ç©ºé—²ã€‚</p>
<p>è¿™äº›ç©ºé—²çš„å€¼åœ¨ä¸åŒçš„è¯­è¨€åœ°åŒºè¢«èµ‹äºˆä¸åŒçš„ç”¨æ³•ã€‚æ¯”å¦‚ç¾æ´²åœ°åŒºç”¨<code>130</code>æ¥è¡¨ç¤º<code>Ã©</code>ï¼Œä½†æ˜¯ä»¥è‰²åˆ—çš„ç”µè„‘ç”¨<code>130</code>æ¥è¡¨ç¤ºå¸Œä¼¯æ¥å­—ç¬¦<code>×’</code>ã€‚é‚£ä¹ˆåœ¨ç¾æ´²ç”µè„‘ä¸Šæ˜¾ç¤ºçš„å•è¯<code>rÃ©sumÃ©s</code>ï¼Œåœ¨ä»¥è‰²åˆ—çš„ç”µè„‘ä¸Šå°±æˆäº† <code>r×’sum×’s</code>ã€‚è¿™å¯¼è‡´äº†åŒä¸€æ–‡æ¡£å†…å®¹åœ¨ä¸åŒçš„ç”µè„‘ä¸Šå¯èƒ½æœ‰ä¸åŒçš„æ˜¾ç¤ºã€‚</p>
<h2 id="code-pageä»£ç é¡µ">Code Pageï¼ˆä»£ç é¡µï¼‰</h2>
<p><code>ANSI</code>ï¼ˆ<code>American National Standards Institute</code>ï¼Œç¾å›½å›½å®¶æ ‡å‡†å­¦ä¼šï¼‰åœ¨åˆ¶å®šæ ‡å‡†çš„æ—¶å€™ï¼Œå¼•å…¥äº†ä»£ç é¡µã€‚</p>
<p>è¿™äº›ä»£ç é¡µ<code>128</code>ä»¥ä¸‹æ˜¯ä¸€æ ·çš„ï¼Œåªæœ‰<code>128</code>ä»¥ä¸Šä¸åŒã€‚å¦‚ï¼Œä»¥è‰²åˆ—ä½¿ç”¨<code>code page 862</code>ï¼Œå¸Œè…Šä½¿ç”¨ <code>code page 737</code>ã€‚</p>
<p>è¿™æ ·åœ¨åŒä¸€ç”µè„‘ä¸Šå¯ä»¥æœ‰å¤šä¸ªä¸åŒçš„ä»£ç é¡µå¯ä¾›é€‰æ‹©ã€‚</p>
<h2 id="dbcsdouble-byte-character-setåŒå­—èŠ‚å­—ç¬¦é›†"><code>DBCS</code>ï¼ˆ<code>Double Byte Character Set</code>ï¼ŒåŒå­—èŠ‚å­—ç¬¦é›†ï¼‰</h2>
<p>ä½†æ˜¯ï¼Œç”±äºäºšæ´²è¯­è¨€æœ‰æˆåƒä¸Šä¸‡çš„å­—ç¬¦ï¼Œæ²¡åŠæ³•ç”¨ä¸€å­—èŠ‚ï¼ˆ<code>8</code>æ¯”ç‰¹ï¼‰å®Œå…¨è¡¨ç¤ºã€‚</p>
<p><code>DBCS</code> æ˜¯å¯¹è‹±æ–‡å­—ç¬¦ä½¿ç”¨å•å­—èŠ‚ï¼Œå…¶ä»–å­—ç¬¦ï¼ˆå¦‚ä¸­æ—¥éŸ©æ–‡ï¼‰ä½¿ç”¨åŒå­—èŠ‚ã€‚è®¿é—®æ–‡æœ¬æ—¶ï¼Œåªèƒ½ä»å‰å‘åå¤„ç†ã€‚å› ä¸ºéœ€è¦ä¸€ç›´åˆ¤æ–­å½“å‰å­—èŠ‚æ˜¯ä¸æ˜¯å‰å¯¼å­—èŠ‚ï¼Œå¯¹äºæ—¢æœ‰å¯èƒ½æ˜¯å‰å¯¼ä¹Ÿæœ‰å¯èƒ½æ˜¯åç»­çš„å­—èŠ‚ï¼Œåªèƒ½é€šè¿‡ä¸Šä¸‹æ–‡åšåˆ¤æ–­ã€‚</p>
<p>å¯¹è®¡ç®—æœºç¨‹åºåŠç¨‹åºå‘˜æ¥è¯´ï¼Œæ“ä½œèµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€å®¹æ˜“å‡ºé”™ã€‚</p>
<h2 id="unicodeç»Ÿä¸€ç ä¸‡å›½ç "><code>Unicode</code>ï¼ˆç»Ÿä¸€ç ã€ä¸‡å›½ç ï¼‰</h2>
<p>ä¸€å¥—å¯ä»¥é€‚ç”¨äºå…¨ä¸–ç•Œæ‰€æœ‰å›½å®¶çš„å­—ç¬¦é›†ã€‚</p>
<p>å¯¹ <code>Unicode</code> æœ€å¸¸è§çš„è¯¯è§£æ˜¯ï¼šæ¯ä¸ªå­—ç¬¦å ç”¨<code>16</code>æ¯”ç‰¹ï¼Œå› æ­¤èƒ½è¡¨ç¤ºçš„å­—ç¬¦ä¸ªæ•°æ˜¯ <code>2çš„16æ¬¡æ–¹=65536</code>ä¸ªã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸å¯¹çš„ã€‚</p>
<p><code>Unicode</code> ä¸­å¯¹æ‰€æœ‰å­—æ¯è¡¨ä¸­çš„æ¯ä¸ªå­—ç¬¦åˆ†é…ä¸€ä¸ªæ•°å­—â€”â€”<code>code point</code>ï¼Œå¦‚ <code>A</code> çš„<code>code point</code> æ˜¯ <code>U+0041</code>ï¼›<code>è¿ª</code>çš„ <code>code point</code> æ˜¯ <code>U+8FEA</code>ã€‚</p>
<p><code>Unicode</code> ä¸­çš„å­—ç¬¦ï¼Œæ˜¯ä¸€ä¸ªæ¦‚å¿µå®šä¹‰ã€‚æ¯”å¦‚å­—ç¬¦<code>A</code>ï¼Œå¾ˆæ˜æ˜¾<code>A</code>ä¸åŒäº<code>B</code>ï¼Œä¹Ÿä¸åŒäº<code>a</code>ï¼Œä½†æ˜¯æ— è®ºæ˜¯æ–œä½“çš„<code>A</code>ã€ç²—ä½“çš„<code>A</code>ã€è¿˜æ˜¯æ­£å¸¸çš„<code>A</code>ï¼Œå®ƒä»¬åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å­—ç¬¦<code>A</code>ã€‚å¯¹äºå­—ä½“<code>Times New Roman</code>ä¸­çš„<code>A</code>ï¼Œåº”è¯¥å’Œå­—ä½“<code>Helvetica</code>ä¸­çš„<code>A</code>ä¸€æ ·ï¼Œéƒ½æ˜¯å­—ç¬¦<code>A</code>ã€‚(å¯¹äºå­—ç¬¦<code>A</code>ï¼Œ<code>Unicode</code>åªå®šä¹‰<code>U+0041</code>æ˜¯å­—ç¬¦<code>A</code>ï¼Œè€Œå…·ä½“çš„è¿™ä¸ªå­—ç¬¦æ˜¾ç¤ºå‡ºæ¥æ—¶ä»€ä¹ˆæ ·å­ï¼Œæ˜¯å®šä¹‰åœ¨å­—ä½“æ–‡ä»¶ä¸­çš„)</p>
<h2 id="ucs-2--utf-16"><code>UCS-2</code> / <code>UTF-16</code></h2>
<p>é‚£ä¹ˆ <code>He</code> ç”¨ <code>Unicode</code> è¡¨ç¤ºå°±æ˜¯ <code>00 48 00 65</code>ã€‚</p>
<p>å¯¹å—ï¼Ÿæ†‹ç€æ€¥ã€‚é‚£å®ƒä¸ºå•¥ä¸èƒ½æ˜¯ <code>48 00 65 00</code> å‘¢ï¼ŸæŠ€æœ¯ä¸Šæ¥è¯´æ²¡æœ‰é—®é¢˜ï¼Œè€Œå®é™…ä¸Šä¹Ÿæ˜¯ä¸¤ç§æ–¹å¼éƒ½å­˜åœ¨ï¼ˆå› ä¸ºç‰¹å®šçš„ <code>CPU</code> ç”¨ç‰¹å®šçš„é¡ºåºä¼šæ›´å¿«ï¼‰â€”â€”å¤§ç«¯åºï¼ˆ<code>big-edian</code>ï¼‰å’Œ å°ç«¯åºï¼ˆ<code>little-endian</code>ï¼‰ã€‚</p>
<p>ä¸ºäº†åŒºåˆ†ï¼Œåœ¨æ–‡æœ¬å¼€å¤´åŠ ä¸Šå­—èŠ‚é¡ºåºæ ‡è®°ä½ï¼Œå¤§ç«¯åºç”¨ <code>FE FF</code>ï¼Œå°ç«¯åºç”¨ <code>FF FE</code>ã€‚</p>
<p>è¿™ç§æ–¹å¼å¯¹äºæ–°ç”Ÿæˆçš„æ–‡æ¡£æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯æ— æ³•å…¼å®¹å·²æœ‰çš„<code>ASCII</code>å’Œ<code>DBCS</code>æ–‡æ¡£ã€‚</p>
<h2 id="utf-8unicode-transformation-format-8-bit">UTF-8ï¼ˆUnicode Transformation Format 8-bitï¼‰</h2>
<p>æ‰€ä»¥ï¼Œå‡ºç°äº†å¦ä¸€ç§å®ç° <code>Unicode</code> å­—ç¬¦é›†çš„ç³»ç»Ÿâ€”â€”<code>UTF-8</code>ã€‚å®ƒé‡‡ç”¨å˜é•¿çš„ç¼–ç ï¼Œç”¨ä¸€ä¸ªå­—èŠ‚å­˜å‚¨ <code>code point 0-127</code>ï¼Œå¯¹ <code>128</code> ä»¥ä¸Šçš„ä½¿ç”¨ <code>2å­—èŠ‚ã€3å­—èŠ‚ï¼Œæœ€å¤šåˆ° 6å­—èŠ‚</code>ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¡¨ç¤ºå­—ç¬¦ <code>â‚¤</code> çš„ <code>Unicode</code> åå…­è¿›åˆ¶å€¼ä¸º <code>U+20A4</code>ï¼Œå…¶äºŒè¿›åˆ¶ä¸º <code>0010 0000 1010 0100</code>ã€‚ç”¨<code>UTF-8</code> æ¥è¡¨ç¤ºå­—ç¬¦<code>â‚¤</code>çš„è¯ï¼Œéœ€è¦<code>3</code>ä¸ªå­—èŠ‚ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰å››ä½ï¼Œç”¨<code>3</code>æ¯”ç‰¹<code>1</code>ï¼ˆä»£è¡¨<code>3</code>ä¸ªå­—èŠ‚ï¼‰åŠ ä¸€ä¸ª<code>0</code>ï¼š<code>1110</code>ã€‚åå››ä½æ¥<code>20A4</code>çš„å‰å››å­èŠ‚ï¼š<code>0010</code>ã€‚å¾—åˆ°<code>1110 0010</code>ã€‚</li>
<li>ç¬¬äºŒå­èŠ‚ä»¥<code>10</code>å¼€å¤´ï¼Œåå…­å­—èŠ‚æ¥<code>20A4</code>çš„å…­å­—èŠ‚ <code>0000 10</code>ï¼Œå¾—åˆ°<code>1000 0010</code>ã€‚</li>
<li>ç¬¬ä¸‰å­èŠ‚è¿˜æ˜¯ä»¥<code>10</code>å¼€å¤´ï¼Œåå…­å­—èŠ‚æ¥<code>20A4</code>æœ€åå…­å­—èŠ‚<code>10 0100</code>ï¼Œå¾—åˆ°<code>1010 0100</code>ã€‚</li>
</ul>
<p>æœ€ç»ˆå¾—åˆ°å­—ç¬¦<code>â‚¤</code>çš„<code>UTF-8</code>è¡¨ç¤ºä¸º<code>1110-0010 1000-0010 1010-0100</code>ã€‚</p>
<blockquote>
<p>å¯¹äºè‹±æ–‡æ–‡æ¡£æ¥è¯´ï¼Œ<code>UTF-8</code> å’Œ <code>ASCII</code>æ˜¯ä¸€æ ·çš„ï¼Œä¸éœ€è¦ä»»ä½•è½¬æ¢ã€‚</p>
</blockquote>
<h3 id="utf-8-æ¯”-utf-16-çœç©ºé—´å—">UTF-8 æ¯” UTF-16 çœç©ºé—´å—ï¼Ÿ</h3>
<p><strong>ä¸ä¸€å®š</strong>ã€‚</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">å­—ç¬¦ä¸²</th>
          <th>UTF-8</th>
          <th>UTF-16</th>
          <th>ç©ºé—´æ¯”è¾ƒ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><code>AI</code></td>
          <td><code>4149</code></td>
          <td><code>0041 0049</code></td>
          <td><code>UTF-8</code>&lt;<code>UTF-16</code></td>
      </tr>
      <tr>
          <td style="text-align: center"><code>å°„é›•</code></td>
          <td><code>E5B0 84E9 9B95</code></td>
          <td><code>5C04 96D5</code></td>
          <td><code>UTF-8</code>&gt;<code>UTF-16</code></td>
      </tr>
  </tbody>
</table>
<blockquote>
<p>å¦‚æœå­˜å‚¨æ•°æ®è‹±æ–‡å­—ç¬¦è¾ƒå¤šï¼Œ<code>UTF-8</code>è‚¯å®šä¼šæ¯”<code>UTF-16</code>èŠ‚çœç©ºé—´ã€‚</p>
</blockquote>
<h2 id="encodingsç¼–ç ">Encodingsï¼ˆç¼–ç ï¼‰</h2>
<p><img loading="lazy" src="/images/character-encoding.jpeg" alt="encoding"  /></p>
<p><code>Unicode</code>æ˜¯å­—ç¬¦é›†ï¼Œä¸Šé¢è¯´çš„ <code>UCS-2</code>ã€<code>UTF-8</code>ç­‰æ˜¯å®ç°<code>Unicode</code>çš„æ–¹æ³•â€”â€”<code>Encoding</code>ã€‚<code>Encoding</code>æœ‰å¤šç§å®ç°ï¼Œå¦‚<code>UTF-7</code>ã€<code>UTF-32</code>ã€<code>ISO8859-1</code>ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¿…é¡»ç¡®å®šæ‰€ç”¨çš„<code>Encoding</code>æ‰èƒ½æ­£ç¡®å¤„ç†ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°è¿™æ¯ä¸ªç½‘é¡µä¼šæœ‰<code>Encoding</code>çš„ä¿¡æ¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;Content-Type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;text/html; charset=utf-8&#34;</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯æ˜¯ï¼Œåœ¨ä¸çŸ¥é“<code>encoding</code>çš„æƒ…å†µä¸‹æ€ä¹ˆå»è¯»è¿™ä¸ª<code>HTML</code>æ–‡ä»¶æ¥å–åˆ°<code>encoding</code>çš„ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œç»å¤§å¤šæ•°<code>encoding</code>å¯¹ <code>32-127</code> çš„<code>code point</code>çš„å¤„ç†æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥æŠŠæ–‡ä»¶å¼€å¤´çš„å†…å®¹å½“ä½œ<code>ASCII</code>æ¥å¤„ç†ã€‚æ‰€ä»¥<code>encoding</code>ä¿¡æ¯è¶Šæ—©å‡ºç°è¶Šå¥½ï¼Œé¿å…å‡ºç°åœ¨ä»»ä½•<code>code point</code>å¤§äº<code>127</code>çš„å­—ç¬¦ä¹‹åã€‚</p>
<p>å¦å¤–ï¼Œ<code>HTTP</code>è¯·æ±‚å¤´ä¸­ä¹Ÿå¯ä»¥åŒ…å«<code>encoding</code>ä¿¡æ¯ï¼ˆ<code>Content-Type</code>ï¼‰ã€‚</p>
<p>æ—©æœŸçš„æµè§ˆå™¨éƒ½æœ‰è®¾ç½®<code>encoding</code>çš„èœå•ï¼Œä»¥åº”å¯¹æ‰¾ä¸åˆ°<code>encoding</code>å®šä¹‰è€Œæ— æ³•æ­£ç¡®å¤„ç†çš„æƒ…å†µã€‚å¤§éƒ¨åˆ†ç°ä»£æµè§ˆå™¨ï¼ˆå¦‚<code>Chrome</code>ï¼‰å·²ç»å»æ‰è¯¥èœå•ï¼Œå¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡åˆ¤æ–­å‡ºæ­£ç¡®<code>encoding</code>äº†ã€‚</p>
<h2 id="åŸæ–‡é“¾æ¥">åŸæ–‡é“¾æ¥</h2>
<ul>
<li><a href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=Mzg5NDE1MTU2NQ==&amp;mid=2247483816&amp;idx=1&amp;sn=2be8183562976b65cbdc37c711ff79fb&amp;chksm=c022bf4af755365cf1440172cb044f204758796097fb42dfc028ff31c58505b5648e2478f10a&amp;token=258030414&amp;lang=zh_CN#rd">æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥çŸ¥é“çš„å­—ç¬¦é›†å‘å±•ç®€å²</a></li>
</ul>
<blockquote>
</blockquote>
]]></content:encoded>
    </item>
    
    <item>
      <title>è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼ã€è®¢é˜…-å‘å¸ƒæ¨¡å¼ã€äº‹ä»¶ç›‘å¬æ¨¡å¼</title>
      <link>https://blog.tomatostore.top/posts/2023/04/design-pattern-observer/</link>
      <pubDate>Tue, 11 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/design-pattern-observer/</guid>
      <description>Design Pattern: Observer Pattern</description>
      <content:encoded><![CDATA[<p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆ<code>Observer Pattern</code>ï¼‰è§£å†³çš„å¯¹è±¡é—´çš„ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå³ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ä¸å¤šä¸ªè§‚å¯Ÿè€…ã€‚æœ€ç›´æ¥çš„ä¾‹å­å°±æ˜¯å…¬ä¼—å·ï¼ˆ<code>Subject</code>ï¼‰åŠè®¢é˜…è€…ï¼ˆ<code>Observer</code>ï¼‰ã€‚</p>
<p>å¯¹äºè§‚å¯Ÿè€…æ¨¡å¼ã€å‘å¸ƒ-è®¢é˜…æ¨¡å¼/äº‹ä»¶ç›‘å¬æ¨¡å¼ï¼Œä¸ºåªæ˜¯ç›¸åŒæŠ€æœ¯å®ç°åŸºç¡€ä¸Šçš„ä¸åŒæ¼”åŒ–ï¼Œå±äºåŒä¸€ç±»è®¾è®¡æ¨¡å¼ã€‚</p>
<hr>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼10">è§‚å¯Ÿè€…æ¨¡å¼1.0</h2>
<p>æ¶‰åŠä¸¤ä¸ªè§’è‰²ï¼š</p>
<ul>
<li>è¢«è§‚å¯Ÿè€…: Subject/Observable/Publisher, ä¼šæœ‰çŠ¶æ€/æ•°æ®å˜åŒ–çš„å¯¹è±¡ã€‚</li>
<li>è§‚å¯Ÿè€…: Observer/Subscriberï¼Œå…³å¿ƒ<code>è¢«è§‚æµ‹å¯¹è±¡</code>çš„å˜åŒ–ã€‚</li>
</ul>
<p>æœ€åŸºç¡€çš„å®ç°éœ€è¦å®šä¹‰ 2 ä¸ªåŸºç±» <code>Subject</code> å’Œ <code>Observer</code>ã€‚</p>
<blockquote>
<p><code>C++</code>å®ç°</p>
</blockquote>
<h3 id="è§‚å¯Ÿè€…">è§‚å¯Ÿè€…</h3>
<p>å…ˆå®šä¹‰æ¥å£ç±» <code>class Observer</code>ï¼Œè¯¥ç±»æ²¡æœ‰é»˜è®¤å®ç°ï¼Œå­ç±»å¿…é¡»å®ç° <code>update()</code> æ¥å£ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Observer.h 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="n">string</span> <span class="n">msg</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// abstract virtual
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è¢«è§‚å¯Ÿå¯¹è±¡">è¢«è§‚å¯Ÿå¯¹è±¡</h3>
<p>åŸºç±» <code>Subject</code>ï¼Œå®ƒéœ€è¦çŸ¥é“æœ‰é‚£äº›è§‚å¯Ÿè€…ï¼Œåœ¨éœ€è¦é€šçŸ¥çš„æ—¶å€™éå†è§‚å¯Ÿè€…åˆ—è¡¨å‘é€é€šçŸ¥ã€‚
æœ‰è‡ªå·±çš„å®ç°ï¼Œå®šä¹‰å­ç±»æ—¶ä¸éœ€è¦å¤å†™åŸºç±»çš„æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Subject.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Subject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">addObserver</span><span class="p">(</span><span class="n">Observer</span> <span class="o">*</span> <span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">removeObserver</span><span class="p">(</span><span class="n">Observer</span> <span class="o">*</span> <span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">notify</span><span class="p">(</span><span class="n">string</span> <span class="n">msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">*&gt;</span> <span class="n">observers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Subjet.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Subject</span><span class="o">::</span><span class="n">addObserver</span><span class="p">(</span><span class="n">Observer</span><span class="o">*</span> <span class="n">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">observers</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Subject</span><span class="o">::</span><span class="n">removeObserver</span><span class="p">(</span><span class="n">Observer</span><span class="o">*</span> <span class="n">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">observers</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Subject</span><span class="o">::</span><span class="n">notify</span><span class="p">(</span><span class="n">string</span> <span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">obs</span><span class="p">:</span> <span class="n">observers</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">obs</span><span class="o">-&gt;</span><span class="n">update</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åº”ç”¨">åº”ç”¨</h3>
<p>ä»¥å…¬ä¼—å·å’Œè®¢é˜…è€…ä¸ºä¾‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å…¬ä¼—å·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Publisher</span><span class="o">:</span> <span class="k">public</span> <span class="n">Subject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">addArticle</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">article</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">articles</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">article</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notify</span><span class="p">(</span><span class="n">article</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">articles</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è®¢é˜…è€…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Subscriber</span><span class="o">:</span> <span class="k">public</span> <span class="n">Observer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span><span class="p">(</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span><span class="o">:</span> <span class="n">name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="n">string</span> <span class="n">article</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">readArticle</span><span class="p">(</span><span class="n">article</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">readArticle</span><span class="p">(</span><span class="n">string</span> <span class="n">article</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; is reading article : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">article</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Publisher</span> <span class="n">publisher</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span> <span class="n">sub1</span><span class="p">(</span><span class="s">&#34;Tom&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sub1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addArticle</span><span class="p">(</span><span class="s">&#34;Article 1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span> <span class="n">sub2</span><span class="p">(</span><span class="s">&#34;Jerry&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sub2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addArticle</span><span class="p">(</span><span class="s">&#34;Article 2&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Tom</span> <span class="n">is</span> <span class="n">reading</span> <span class="nl">article</span> <span class="p">:</span> <span class="n">Article</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Tom</span> <span class="n">is</span> <span class="n">reading</span> <span class="nl">article</span> <span class="p">:</span> <span class="n">Article</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">Jerry</span> <span class="n">is</span> <span class="n">reading</span> <span class="nl">article</span> <span class="p">:</span> <span class="n">Article</span> <span class="mi">2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼20">è§‚å¯Ÿè€…æ¨¡å¼2.0</h2>
<p>ä¸Šé¢çš„<code>Observer</code>æä¾›äº†ä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„<code>update</code>æ¥å£ï¼š <code>virtual void update(string msg)</code>ã€‚
è™½ç„¶åœ¨åº”ç”¨ä¸­å¯ä»¥é€šè¿‡ä¼ é€’ä¸åŒå‚æ•°æ¥åŒºåˆ†ä¸åŒçš„é€šçŸ¥ï¼Œæ¯”å¦‚ï¼š<code>update(&quot;å…¨éƒ¨è®¢é˜…è€…å¯è§æ›´æ–°&quot;)</code>ï¼Œ<code>update(&quot;VIPè®¢é˜…è€…å¯è§æ›´æ–°&quot;)</code>ï¼Œä½†å¯¹äºå¤æ‚ä¸€ç‚¹çš„éœ€è¦å¤šå‚æ•°ä¼ é€’çš„åœºæ™¯å°±ä¸é€‚ç”¨äº†ã€‚</p>
<p>é‚£ä¹ˆå¯ä»¥é€šè¿‡å¼•å…¥<code>Event</code>ç±»å‹ï¼Œä»¥æ›´çµæ´»çš„å®šä¹‰ä¸åŒçš„ã€å¤æ‚çš„é€šçŸ¥ç±»å‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Event æ¥å£å®šä¹‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">EventType</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ARTICLE_UPDATED</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">VIP_ARTICLE_UPDATED</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Event</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">EventType</span> <span class="n">type</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="o">~</span><span class="n">Event</span><span class="p">()</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å…·ä½“çš„ Event ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">ArticleUpdatedEvent</span><span class="o">:</span> <span class="k">public</span> <span class="n">Event</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">EventType</span> <span class="n">type</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">ARTICLE_UPDATED</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="nf">getArticle</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">article</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">setArticle</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">article</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">article</span> <span class="o">=</span> <span class="n">article</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="n">article</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">VipArticleUpdatedEvent</span><span class="o">:</span> <span class="k">public</span> <span class="n">Event</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">virtual</span> <span class="n">EventType</span> <span class="n">type</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="n">VIP_ARTICLE_UPDATED</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="nf">getArticle</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">article</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">setArticle</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">article</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">article</span> <span class="o">=</span> <span class="n">article</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getReward</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">reward</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">setReward</span><span class="p">(</span><span class="kt">int</span> <span class="n">reward</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">reward</span> <span class="o">=</span> <span class="n">reward</span><span class="p">;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="n">article</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">reward</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°†<code>Observer</code>æ›´æ–°ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Observer.h 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Observer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// virtual void update(string msg) = 0; // abstract virtual
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="n">shared_pointer</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">event</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// abstract virtual
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Subject</code>æ›´æ–°ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Subject.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Subject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// virtual void notify(string msg);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">notify</span><span class="p">(</span><span class="n">shared_pointer</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>åº”ç”¨åˆ°<code>å…¬ä¼—å·â€”â€”è®¢é˜…è€…</code>ä¸Šï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// å…¬ä¼—å·
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Publisher</span><span class="o">:</span> <span class="k">public</span> <span class="n">Subject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">addArticle</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">article</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">e</span> <span class="o">=</span> <span class="n">make_shared</span><span class="o">&lt;</span><span class="n">ArticleUpdatedEvent</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">e</span><span class="o">-&gt;</span><span class="n">setArticle</span><span class="p">(</span><span class="n">article</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notify</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">addVipArticleWithReward</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">article</span><span class="p">,</span> <span class="kt">int</span> <span class="n">reward</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">e</span> <span class="o">=</span> <span class="n">make_shared</span><span class="o">&lt;</span><span class="n">VipArticleUpdatedEvent</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">e</span><span class="o">-&gt;</span><span class="n">setArticle</span><span class="p">(</span><span class="n">article</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">e</span><span class="o">-&gt;</span><span class="n">setReward</span><span class="p">(</span><span class="n">reward</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">notify</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è®¢é˜…è€…
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Subscriber</span><span class="o">:</span> <span class="k">public</span> <span class="n">Observer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span><span class="p">(</span><span class="n">string</span> <span class="n">name</span><span class="p">)</span><span class="o">:</span> <span class="n">name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">event</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">switch</span> <span class="p">(</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="n">EventType</span><span class="o">::</span><span class="nl">ARTICLE_UPDATED</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span> <span class="n">e</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">ArticleUpdatedEvent</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">string</span> <span class="n">article</span> <span class="o">=</span> <span class="n">e</span><span class="o">-&gt;</span><span class="n">getArticle</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">readArticle</span><span class="p">(</span><span class="n">article</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">case</span> <span class="n">EventType</span><span class="o">::</span><span class="nl">VIP_ARTICLE_UPDATED</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">auto</span> <span class="n">e</span> <span class="o">=</span> <span class="k">dynamic_cast</span><span class="o">&lt;</span><span class="n">VipArticleUpdatedEvent</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="o">!=</span> <span class="k">nullptr</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">string</span> <span class="n">vipArticle</span> <span class="o">=</span> <span class="n">e</span><span class="o">-&gt;</span><span class="n">getArticle</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">readArticle</span><span class="p">(</span><span class="n">vipArticle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="kt">int</span> <span class="n">reward</span> <span class="o">=</span> <span class="n">e</span><span class="o">-&gt;</span><span class="n">getReward</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="n">earnReward</span><span class="p">(</span><span class="n">reward</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">readArticle</span><span class="p">(</span><span class="n">string</span> <span class="n">article</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; is reading article : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">article</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">earnReward</span><span class="p">(</span><span class="kt">int</span> <span class="n">reward</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; earned reward : &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">reward</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Publisher</span> <span class="n">publisher</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span> <span class="n">sub1</span><span class="p">(</span><span class="s">&#34;Tom&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sub1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addArticle</span><span class="p">(</span><span class="s">&#34;Article 1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span> <span class="n">sub2</span><span class="p">(</span><span class="s">&#34;Jerry&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sub2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addVipArticleWithReward</span><span class="p">(</span><span class="s">&#34;Article 2&#34;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<pre tabindex="0"><code>Tom is reading article : Article 1

Tom is reading article : Article 2
Tom earned reward : 5
Jerry is reading article : Article 2
Jerry earned reward : 5
</code></pre><p>é€šè¿‡ç»§æ‰¿<code>Event</code>ï¼Œè¿™ä¸ªç‰ˆæœ¬æ”¯æŒçµæ´»çš„æ‰©å±•é€šçŸ¥ç±»å‹ï¼Œå¯¹ä¼ é€’çš„å‚æ•°ä¸ªæ•°å’Œç±»å‹æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚</p>
<p>ç›®å‰ä¸ºæ­¢ï¼Œè¢«è®¢é˜…å¯¹è±¡å‘é€ <code>notify</code> æ—¶å¯¹æ‰€æœ‰çš„è®¢é˜…è€…éƒ½æ˜¯ä¸€è§†åŒä»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ¶ˆæ¯æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>å¯¹äºä¸Šé¢å…¬ä¼—å·çš„ä¾‹å­ï¼Œå¦‚æœæƒ³å®ç°å¯¹ VIP è®¢é˜…è€…å’Œæ™®é€šè®¢é˜…è€…æ¨é€ä¸åŒçš„é€šçŸ¥ï¼Œé‚£å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼ã€‚</p>
<hr>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼30">è§‚å¯Ÿè€…æ¨¡å¼3.0</h2>
<p>æ›´æ”¹ <code>Subject</code> çš„è®¢é˜…å’Œé€šçŸ¥æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Subject.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Subject</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">addObserver</span><span class="p">(</span><span class="n">EventType</span> <span class="n">type</span><span class="p">,</span> <span class="n">Observer</span> <span class="o">*</span> <span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">removeObserver</span><span class="p">(</span><span class="n">EventType</span> <span class="n">type</span><span class="p">,</span> <span class="n">Observer</span> <span class="o">*</span> <span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">notify</span><span class="p">(</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">EventType</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">Observer</span><span class="o">*&gt;</span> <span class="o">&gt;</span> <span class="n">observers</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Subjet.cpp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Subject</span><span class="o">::</span><span class="n">addObserver</span><span class="p">(</span><span class="n">EventType</span> <span class="n">type</span><span class="p">,</span> <span class="n">Observer</span><span class="o">*</span> <span class="n">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">observers</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="n">insert</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Subject</span><span class="o">::</span><span class="n">removeObserver</span><span class="p">(</span><span class="n">EventType</span> <span class="n">type</span><span class="p">,</span> <span class="n">Observer</span><span class="o">*</span> <span class="n">observer</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">observers</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="n">erase</span><span class="p">(</span><span class="n">observer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">Subject</span><span class="o">::</span><span class="n">notify</span><span class="p">(</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">obs</span><span class="p">:</span> <span class="n">observers</span><span class="p">[</span><span class="n">event</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">()])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">obs</span><span class="o">-&gt;</span><span class="n">update</span><span class="p">(</span><span class="n">event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹<code>main</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Publisher</span> <span class="n">publisher</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span> <span class="n">sub1</span><span class="p">(</span><span class="s">&#34;Tom&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="n">EventType</span><span class="o">::</span><span class="n">ARTICLE_UPDATED</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sub1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addArticle</span><span class="p">(</span><span class="s">&#34;Article 1&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Subscriber</span> <span class="n">sub2</span><span class="p">(</span><span class="s">&#34;Jerry&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="n">EventType</span><span class="o">::</span><span class="n">VIP_ARTICLE_UPDATED</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sub2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">publisher</span><span class="p">.</span><span class="n">addVipArticleWithReward</span><span class="p">(</span><span class="s">&#34;VIP Article 2&#34;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<pre tabindex="0"><code>Tom is reading article : Article 1

Jerry is reading article : VIP Article 2
Jerry earned reward : 5
</code></pre><p>æ­¤ç‰ˆæœ¬è¿›åŒ–åˆ°äº†ä¸€ä¸ªæ›´ä¸ºç‰¹æ®Šçš„è§‚å¯Ÿè€…æ¨¡å¼â€”â€”â€”å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ï¼Œæˆ–è€…å«äº‹ä»¶è®¢é˜…æ¨¡å¼ã€‚</p>
<h3 id="observer-pattern-vs-publish-subscribe-pattern">Observer Pattern v.s. Publish-Subscribe Pattern</h3>
<p>å…¶ä¸»è¦åŒºåˆ«æ˜¯è§‚å¯Ÿè€…æ¨¡å¼æ¶‰åŠä¸¤ç§è§’è‰² <code>Subject</code> å’Œ <code>Observer</code>ï¼Œè€Œå‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­é—´å¤šäº†ä¸€ä¸ª<code>Event</code>å¤„ç†ï¼Œæœ‰çš„ç§°ä¹‹ä¸º<code>Broker</code>æˆ–<code>Channel</code>:</p>
<p><img loading="lazy" src="/images/observer-pattern-v.s.-publish-subscript-pattern.jpeg" alt="Observer Pattern v.s. Publish-Subscribe Pattern"  /></p>
<hr>
<h2 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h2>
<ul>
<li><a href="https://github.com/AidySun/aidysun.github.io/tree/main/src/design-pattern-observer.v1.0.cpp">design-pattern-observer v1.0.cpp</a></li>
<li><a href="https://github.com/AidySun/aidysun.github.io/tree/main/src/design-pattern-observer.v2.0.cpp">design-pattern-observer v2.0.cpp</a></li>
<li><a href="https://github.com/AidySun/aidysun.github.io/tree/main/src/design-pattern-observer.v3.0.cpp">design-pattern-observer v3.0.cpp</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Swift: beginAnimations(_:context:) was deprecated in iOS 13.0: Use the block-based animation API instead</title>
      <link>https://blog.tomatostore.top/posts/2023/04/swift-block-based-animation/</link>
      <pubDate>Sun, 02 Apr 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/04/swift-block-based-animation/</guid>
      <description>Swift / Objective-C block-based animation</description>
      <content:encoded><![CDATA[<p>ç”¨ <code>Xcode 14.2</code> å‡çº§ä¸€ä¸ª <code>Swift</code> é¡¹ç›®æ—¶æœ‰ç¼–è¯‘è­¦å‘Šï¸âš æç¤º <code>beginAnimations()</code> åœ¨ <code>iOS 13.0</code> åå·²ç»ä¸æ¨èä½¿ç”¨ï¼Œåº”è¯¥ç”¨ <code>block-based animation</code> ä»£æ›¿ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="hl"><span class="lnt">1
</span></span><span class="hl"><span class="lnt">2
</span></span><span class="hl"><span class="lnt">3
</span></span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line hl"><span class="cl"><span class="n">UIView</span><span class="p">.</span><span class="n">beginAnimations</span><span class="p">(</span><span class="kc">nil</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="c1">// &#39;beginAnimations(_:context:)&#39; was deprecated in iOS 13.0: Use the block-based animation API instead</span>
</span></span><span class="line hl"><span class="cl"><span class="n">UIView</span><span class="p">.</span><span class="n">setAnimationDuration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span> <span class="c1">// &#39;setAnimationDuration&#39; was deprecated in iOS 13.0: Use the block-based animation API instead</span>
</span></span><span class="line hl"><span class="cl"><span class="n">UIView</span><span class="p">.</span><span class="n">commitAnimations</span><span class="p">()</span> <span class="c1">// &#39;commitAnimations()&#39; was deprecated in iOS 13.0: Use the block-based animation API instead </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">currentOverlay</span> <span class="p">=</span> <span class="n">overlay</span>
</span></span><span class="line"><span class="cl"><span class="n">currentOverlayTarget</span> <span class="p">=</span> <span class="n">overlayTarget</span>
</span></span><span class="line"><span class="cl"><span class="n">currentLoadingText</span> <span class="p">=</span> <span class="n">loadingText</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>ä¿®æ”¹ä¸ºä½¿ç”¨ <code>Block-based animation</code> çš„ä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-swift" data-lang="swift"><span class="line"><span class="cl"><span class="n">UIView</span><span class="p">.</span><span class="n">animate</span><span class="p">(</span><span class="n">withDuration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentOverlay</span> <span class="p">=</span> <span class="n">overlay</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentOverlayTarget</span> <span class="p">=</span> <span class="n">overlayTarget</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentLoadingText</span> <span class="p">=</span> <span class="n">loadingText</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœç”¨ <code>Objective-C</code> åˆ™ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-objc" data-lang="objc"><span class="line"><span class="cl"><span class="p">[</span><span class="n">UIView</span> <span class="nl">animateWithDuration</span><span class="p">:</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl">                 <span class="nl">animations</span><span class="p">:</span> <span class="o">^</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentOverlay</span> <span class="o">=</span> <span class="n">overlay</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentOverlayTarget</span> <span class="o">=</span> <span class="n">overlayTarget</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">currentLoadingText</span> <span class="o">=</span> <span class="n">loadingText</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}];</span>
</span></span></code></pre></td></tr></table>
</div>
</div>]]></content:encoded>
    </item>
    
    <item>
      <title>Markdown è·¯å¾„ä¸­æœ‰ç©ºæ ¼çš„é“¾æ¥(link)</title>
      <link>https://blog.tomatostore.top/posts/2023/03/markdown-link-to-url-with-space/</link>
      <pubDate>Thu, 30 Mar 2023 21:17:22 +0800</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/03/markdown-link-to-url-with-space/</guid>
      <description>Markdown ä¸­åŠ å…¥è¶…é“¾æ¥æŒ‡å‘æ–‡ä»¶ï¼Œä½†æ–‡ä»¶åä¸­åŒ…å«ç©ºæ ¼ï¼Œæ€ä¹ˆåŠï¼Ÿ</description>
      <content:encoded><![CDATA[<h2 id="æ–¹æ³•ä¸€-å°†ç©ºæ ¼æ›¿æ¢ä¸º20">æ–¹æ³•ä¸€ï¼š å°†ç©ºæ ¼æ›¿æ¢ä¸º<code>%20</code></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="k">-</span> [<span class="nt">ç™¾åº¦æœç´¢ markdown link space</span>](<span class="na">https://www.baidu.com/s?wd=markdown%20link%20space</span>)
</span></span><span class="line"><span class="cl"><span class="k">-</span> [<span class="nt">çˆ¶ç›®å½•ä¸­çš„READ ME.md</span>](<span class="na">../READ%20ME.md</span>) 
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ•ˆæœï¼š</p>
<ul>
<li><a href="https://www.baidu.com/s?wd=markdown%20link%20space">ç™¾åº¦æœç´¢ markdown link space</a></li>
<li><a href="../READ%20ME.md">çˆ¶ç›®å½•ä¸­çš„READ ME.md</a> <code>:spider:404é¢„è­¦</code></li>
</ul>
<h2 id="æ–¹æ³•äºŒ-ç”¨--æŠŠå¸¦ç©ºæ ¼çš„è·¯å¾„urlæ‹¬èµ·æ¥">æ–¹æ³•äºŒï¼š ç”¨ <code>&lt;&gt;</code> æŠŠå¸¦ç©ºæ ¼çš„è·¯å¾„/URLæ‹¬èµ·æ¥</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl"><span class="k">-</span> [<span class="nt">Bingæœç´¢ markdown link with space</span>](<span class="na">&lt;https://cn.bing.com/search?q=markdown link with space&gt;</span>)
</span></span><span class="line"><span class="cl"><span class="k">-</span> [<span class="nt">çˆ¶ç›®å½•ä¸­çš„READ ME.md</span>](<span class="na">&lt;../READ ME.md&gt;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><a href="https://cn.bing.com/search?q=markdown%20link%20with%20space">Bingæœç´¢ markdown link with space</a></li>
<li><a href="../READ%20ME.md">çˆ¶ç›®å½•ä¸­çš„READ ME.md</a> <code>:lady_beetle:404é¢„è­¦</code></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>hugo ä¸»é¢˜æœ¬åœ°æ²¡é—®é¢˜ï¼Œgithub.ioä¸­ä¸èµ·ä½œç”¨</title>
      <link>https://blog.tomatostore.top/posts/2023/03/hugo-theme-not-work-online/</link>
      <pubDate>Tue, 28 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/03/hugo-theme-not-work-online/</guid>
      <description>Failed to find a valid digest in the &amp;#39;integrity&amp;#39; attribute for resource &amp;#39;https://.....css&amp;#39; with computed SHA-256 integrity &amp;#39;.....&amp;#39;. The resource has been blocked.</description>
      <content:encoded><![CDATA[<p><strong>æ ¹æœ¬åŸå› ï¼š<code>git crlf</code> è®¾ç½®å¯¼è‡´æ¨é€åˆ° <code>github</code> çš„æ–‡ä»¶å˜åŠ¨ã€‚</strong></p>
<p><code>Hugo</code> é™æ€åšå®¢ï¼Œä½¿ç”¨ <code>PaperMode</code> ä¸»é¢˜ï¼Œæœ¬åœ°æ¸²æŸ“æ²¡é—®é¢˜ï¼Œå°† <code>publish</code> æ–‡ä»¶å¤¹ <code>push</code> åˆ° <code>&lt;username&gt;.github.io</code> åï¼Œé€šè¿‡ Github Page è®¿é—®ä¼šå‡ºç° <code>CSS block</code> çš„æƒ…å†µï¼š</p>
<p><img loading="lazy" src="/images/hugo-local-vs-online.png" alt="hugo local v.s. online"  /></p>
<h2 id="å°è¯•è¿‡ä½†ä¸èµ·ä½œç”¨çš„æ–¹æ³•">å°è¯•è¿‡ä½†ä¸èµ·ä½œç”¨çš„æ–¹æ³•</h2>
<ol>
<li>ä¿®æ”¹ <code>config.toml</code> ä¸­çš„ <code>baseURL</code>ï¼Œç”¨ <code>http</code>ã€ç”¨ <code>https</code>ã€‚</li>
<li>æ ¹æ® <a href="https://github.com/kylethedeveloper/hugo-PaperMod/commit/1b9352398fe91fab207337352befee77152cc544">head, footer: add option to disable fingerprinting adityatelange#89</a>, åœ¨ <code>config.toml</code> ä¸­åŠ å…¥å¦‚ä¸‹å†…å®¹:</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">assets</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">disableFingerprinting</span> <span class="p">=</span> <span class="kc">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æˆ‘çš„è§£å†³æ–¹æ³•">æˆ‘çš„è§£å†³æ–¹æ³•</h2>
<p>æ ¹æ® <a href="https://github.com/lxndrblz/anatole/issues/114">Failed to find a valid digest in the integrity attribute</a>ï¼Œé—®é¢˜å¯èƒ½æ˜¯ <code>git</code> <code>line breaking</code> çš„é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ <code>macOS</code>ï¼Œå½“æ—¶çš„ <code>git config -l</code> ä¸­:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">core.autocrlf<span class="o">=</span><span class="nb">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ <code>hugo project repo</code> å’Œ æˆ‘çš„ <code>github.io</code> repo ä¸­ æ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git config core.autocrlf <span class="nb">false</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åç”Ÿæˆåšå®¢ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> blog-hugo
</span></span><span class="line"><span class="cl">hugo -t PaperMod
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># publish is &lt;username&gt;.github.io repo as a submodule</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> publish
</span></span><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">git commit -m <span class="s2">&#34;fix online theme&#34;</span>
</span></span><span class="line"><span class="cl">git push
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®Œç¾è§£å†³ï¼š</p>
<p><img loading="lazy" src="/images/hugo-online-fixed.png" alt="fixed online"  /></p>
<h2 id="å…¶å®ƒæœªå°è¯•çš„æ–¹æ³•">å…¶å®ƒæœªå°è¯•çš„æ–¹æ³•</h2>
<ul>
<li>ä¿®æ”¹æ¨¡ç‰ˆä¸­çš„ <code>integrity=&quot;{{ xxxx }}&quot;</code> ä¸º <code>integrity=&quot;&quot;</code></li>
<li><code>git config --global core.autocrlf input</code></li>
<li><a href="https://swopnil.com/blog/valid-digest-integrity-error-hugo-styling/">CloudFlare Cache</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>èƒ½å¦åœ¨ C&#43;&#43; çš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ this æŒ‡é’ˆ</title>
      <link>https://blog.tomatostore.top/posts/2023/03/this-pointer-in-cpp-ctor/</link>
      <pubDate>Mon, 27 Mar 2023 22:07:21 +0800</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/03/this-pointer-in-cpp-ctor/</guid>
      <description>æ„é€ å‡½æ•°æ²¡æ‰§è¡Œå®Œï¼Œthisä¸å¯ä»¥ç”¨ï¼Ÿç»§æ‰¿å¤šæ€ä¸­çˆ¶ç±»èƒ½å¦ç”¨thisæŒ‡é’ˆè§¦å‘å¤šæ€è°ƒç”¨ï¼Ÿ</description>
      <content:encoded><![CDATA[<p>ç›´æ¥è¯´ç»“è®ºï¼š<strong>å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ thisï¼Œä½†æ˜¯ï¼Œå¤šæ€æ— æ³•ç”Ÿæ•ˆã€‚</strong></p>
<p>æœ‰äººè®¤ä¸ºåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå¯¹è±¡çš„æ„é€ è¿˜æ²¡æœ‰å®Œæˆï¼Œä¸èƒ½ä½¿ç”¨ this æŒ‡é’ˆã€‚
æ ¹æ®<a href="https://isocpp.org/wiki/faq/ctors#using-this-in-ctors">Should you use the this pointer in the constructor?</a>çš„æè¿°ï¼Œåœ¨æ„é€ å‡½æ•°çš„å‡½æ•°ä½“ä¸­ä½¿ç”¨thisæŒ‡é’ˆå¯ä»¥æ”¾å¿ƒçš„è®¿é—®çˆ¶ç±»å’Œè‡ªå·±ç±»ä¸­å®šä¹‰çš„æ•°æ®æˆå‘˜ï¼ˆdata membersï¼‰ã€‚å› ä¸ºé‚£äº›æ•°æ®æˆå‘˜åœ¨æ„é€ å‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶å·²ç»æ„é€ å®Œæˆäº†ã€‚</p>
<blockquote>
<p>Here is something that always works: the {body} of a constructor (or a function called from the constructor) can reliably access the data members declared in a base class and/or the data members declared in the constructorâ€™s own class. This is because all those data members are guaranteed to have been fully constructed by the time the constructorâ€™s {body} starts executing.</p>
</blockquote>
<p>ä½†è¦<strong>æ³¨æ„</strong>åœ¨æœ‰ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œå³ä½¿æ˜¯æ­£åœ¨æ„é€ ä¸€ä¸ªå­ç±»å®ä¾‹ï¼Œåœ¨çˆ¶ç±»çš„æ„é€ é˜¶æ®µï¼Œå½“å‰çš„å®ä¾‹è¿˜ä¸æ˜¯å­ç±»å‹ã€‚</p>
<blockquote>
<p>The bottom line is this: even if the caller is constructing an object of a derived class, during the constructor of the base class, your object is not yet of that derived class. You have been warned.</p>
</blockquote>
<p>è¿™ä¹Ÿå°±å¯¼è‡´äº†åœ¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼ŒthisæŒ‡é’ˆæ˜¯æ— æ³•è§¦å‘å¤šæ€ï¼Œä¹Ÿå°±æ˜¯æ— æ³•è°ƒç”¨åˆ°æ­£ç¡®çš„è™šå‡½æ•°ï¼ˆvirtual functionsï¼‰ã€‚</p>
<blockquote>
<p>Here is something that never works: the {body} of a constructor (or a function called from the constructor) cannot get down to a derived class by calling a virtual member function that is overridden in the derived class. If your goal was to get to the overridden function in the derived class, you wonâ€™t get what you want. Note that you wonâ€™t get to the override in the derived class independent of how you call the virtual member function: explicitly using the this pointer (e.g., this-&gt;method()), implicitly using the this pointer (e.g., method()), or even calling some other function that calls the virtual member function on your this object.</p>
</blockquote>
<p>å¯ä»¥ç”¨å¦‚ä¸‹çš„ä¾‹å­ç±»éªŒè¯ä¸€ä¸‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="hl"><span class="lnt">10
</span></span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="hl"><span class="lnt">25
</span></span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="hl"><span class="lnt">57
</span></span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">A</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;A() { </span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line hl"><span class="cl">    <span class="k">this</span><span class="o">-&gt;</span><span class="n">vf</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="o">-&gt;</span><span class="n">f1</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;} </span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="o">~</span><span class="n">A</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;~A()</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">vf</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;  A&#39;s vf()</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;  A&#39;s f1()</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line hl"><span class="cl">    <span class="n">vf</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">B</span> <span class="o">:</span> <span class="k">public</span> <span class="n">A</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">  <span class="n">B</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;B() { </span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="o">-&gt;</span><span class="n">vf</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="o">-&gt;</span><span class="n">f1</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;} </span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="o">~</span><span class="n">B</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;~B()</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">vf</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;  B&#39;s vf()</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="nf">f1</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;  B&#39;s f1()</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vf</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;creat A a</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">A</span> <span class="n">a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;creat B b</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line hl"><span class="cl">  <span class="n">B</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;======</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="hl"><span class="lnt"> 9
</span></span><span class="lnt">10
</span><span class="hl"><span class="lnt">11
</span></span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">creat A a
</span></span><span class="line"><span class="cl">A<span class="o">()</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">  A<span class="s1">&#39;s vf()
</span></span></span><span class="line"><span class="cl"><span class="s1">  A&#39;</span>s f1<span class="o">()</span>
</span></span><span class="line"><span class="cl">  A<span class="s1">&#39;s vf()
</span></span></span><span class="line"><span class="cl"><span class="s1">} 
</span></span></span><span class="line"><span class="cl"><span class="s1">creat B b  // å¼€å§‹æ„é€  B b;
</span></span></span><span class="line"><span class="cl"><span class="s1">A() { 
</span></span></span><span class="line hl"><span class="cl"><span class="s1">  A&#39;</span>s vf<span class="o">()</span> // åœ¨Bçš„æ„é€ è¿‡ç¨‹ä¸­ï¼Œçˆ¶ç±»Aä¸­çš„thisè°ƒç”¨çš„æ˜¯Açš„virtual <span class="k">function</span> 
</span></span><span class="line"><span class="cl">  A<span class="s1">&#39;s f1()
</span></span></span><span class="line hl"><span class="cl"><span class="s1">  A&#39;</span>s vf<span class="o">()</span> // åŒæ ·ï¼Œåœ¨çˆ¶ç±»æ„é€ å‡½æ•°ä¸­é—´æ¥è°ƒç”¨çš„è™šå‡½æ•°ï¼Œä¹Ÿä¸ä¼šè°ƒç”¨å­ç±»çš„è™šå‡½æ•°
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl">B<span class="o">()</span> <span class="o">{</span> 
</span></span><span class="line"><span class="cl">  B<span class="s1">&#39;s vf()
</span></span></span><span class="line"><span class="cl"><span class="s1">  B&#39;</span>s f1<span class="o">()</span>
</span></span><span class="line"><span class="cl">  B<span class="err">&#39;</span>s vf<span class="o">()</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span> 
</span></span><span class="line"><span class="cl"><span class="o">======</span>
</span></span><span class="line"><span class="cl">~B<span class="o">()</span>
</span></span><span class="line"><span class="cl">~A<span class="o">()</span>
</span></span><span class="line"><span class="cl">~A<span class="o">()</span></span></span></code></pre></td></tr></table>
</div>
</div>
]]></content:encoded>
    </item>
    
    <item>
      <title>å¦‚ä½•åˆ é™¤æœ¬åœ° git ä¸­æœªè¿½è¸ªçš„æ–‡ä»¶/æ–‡ä»¶å¤¹</title>
      <link>https://blog.tomatostore.top/posts/2023/03/git-rm-untracked-file-dir/</link>
      <pubDate>Fri, 24 Mar 2023 00:00:00 +0000</pubDate>
      
      <guid>https://blog.tomatostore.top/posts/2023/03/git-rm-untracked-file-dir/</guid>
      <description>git clean/delete untracked files, folders</description>
      <content:encoded><![CDATA[<p>å¯¹äºä¸€ä¸ª git é¡¹ç›®ï¼Œæ‰§è¡Œ <code>git status -u</code> æœ‰å¦‚ä¸‹çŠ¶æ€ï¼š</p>
<p><img loading="lazy" src="/images/git-status--u.png" alt="git status -u result"  title="hi"  /></p>
<p>å¯¹äºæœ¬åœ°æ–°å¢çš„æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ <code>clean</code> å‘½ä»¤ç›´æ¥åˆ é™¤ï¼š</p>
<p><img loading="lazy" src="/images/git-clean--f.png" alt="git clean -f"  /></p>
<p><img loading="lazy" src="/images/git-status--u-2.png" alt="after clean"  /></p>
<p>ä½†æ˜¯æœ¬åœ°æ–°å¢çš„æ–‡ä»¶å¤¹å´æ²¡æœ‰è¢«åˆ é™¤æ‰ã€‚è¦åˆ é™¤æ–‡ä»¶å¤¹éœ€è¦åŠ ä¸Š <code>-d</code> å‚æ•°ï¼š</p>
<p><img loading="lazy" src="/images/git-clean-fd.png" alt="git clean -f -d"  /></p>
<p>è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯å·²ç»åœ¨ <code>.gitignore</code> ä¸­çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯ä¸ä¼šè¢«åˆ é™¤çš„ã€‚</p>
<p><img loading="lazy" src="/images/cat-.gitignore.png" alt="cat .gitignore"  /></p>
<p><img loading="lazy" src="/images/git-status---ignored.png" alt="git status &ndash;ignored"  /></p>
<p>éœ€è¦é€šè¿‡ <code>-x</code> é€‰é¡¹æ¥åˆ é™¤è¢« <code>.gitignore</code> åŒ…å«çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼š</p>
<p><img loading="lazy" src="/images/git-clean--fdx.png" alt="git clean -f -d -x"  /></p>
<h2 id="git-clean-options"><code>git clean</code> options</h2>
<table>
  <thead>
      <tr>
          <th style="text-align: center">Option</th>
          <th>Comments</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><code>-f</code></td>
          <td><em>Delete files or diretories</em></td>
      </tr>
      <tr>
          <td style="text-align: center"><code>-d</code></td>
          <td><em>Recurse into untracked directories</em></td>
      </tr>
      <tr>
          <td style="text-align: center"><code>-x</code></td>
          <td><em>Donâ€™t use the standard ignore rules</em></td>
      </tr>
  </tbody>
</table>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
